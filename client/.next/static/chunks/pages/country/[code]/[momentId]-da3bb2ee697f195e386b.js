(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{36243:function(e,t,n){"use strict";n.d(t,{u:function(){return c}});var i=n(35944),r=n(39249),o=function(e){var t=e.onClickConfirm,n=e.closeToast,r=e.message,o=e.type;return(0,i.BX)("div",{style:{cursor:"default"},children:[(0,i.tZ)("h4",{style:{marginLeft:"0.3rem"},children:r}),(0,i.BX)("div",{className:"confirm-btn-wrapper",children:[(0,i.BX)("button",{onClick:function(){t(),n()},children:["\ub124 ",o]}),(0,i.tZ)("button",{onClick:n,children:"\uc544\ub2c8\uc694"})]})]})},c=function(e,t,n){(0,r.Am)((0,i.tZ)(o,{onClickConfirm:e,message:t,type:n}),{position:"top-center",hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0})}},27807:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return G},default:function(){return L}});var i=n(35944),r=n(4942),o=n(67294),c=n(53215),a=n(90300),d=n(63368),l=n(42106),u=(0,l.Z)("section",{target:"epeplqa0"})("margin-bottom:2rem;padding:2rem;border-radius:1rem;--tw-bg-opacity:1;background-color:rgba(255, 255, 255, var(--tw-bg-opacity)); .image-wrapper{padding-top:2rem;padding-bottom:2rem;cursor:pointer;border-radius:0.75rem; .ant-image{width:100%; .ant-image-img{width:100%;border-radius:0.75rem; height:450px;}.anticon{font-size:3rem;}}}.liked{.anticon{color:",c.Ss,";}}.post-content{padding-top:2rem;padding-bottom:3rem; min-height:200px;img{width:70%;}}.post-footer{li{padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0.5rem;padding-right:0.5rem;margin-right:0.25rem;cursor:pointer;border-radius:0.75rem;:hover{--tw-bg-opacity:1;background-color:rgba(243, 244, 246, var(--tw-bg-opacity));} .count{margin:0 0.3rem;}.anticon{font-size:1.2rem;}}}@media (max-width: ",c.oe,"){padding-top:1rem;padding-bottom:1rem;padding-left:0.5rem;padding-right:0.5rem;;}"),s=(0,l.Z)("div",{target:"eo2hp0o0"})("padding-bottom:1rem; ",(0,c.h_)("border-bottom"),";",(0,c.Yk)("space-between","flex-end"),";.right-menu{",(0,c.Yk)("center","flex-end"),";a{padding:0.25rem;border-radius:9999px;:hover{--tw-bg-opacity:1;background-color:rgba(243, 244, 246, var(--tw-bg-opacity));} border-radius:50%;.anticon{font-size:1.1rem;}}}"),m=n(27049),p=n(8212),v=n(73171),f=n(49226),g=n(13265),h=n(11163),b=n(36243),Z=n(9669),y=n.n(Z),w=function(e){var t=e.moment,n=((0,f.I0)(),(0,o.useState)(!1)),r=n[0],a=n[1],d=(0,f.v9)((function(e){return e.user})).user;(0,o.useEffect)((function(){var e;(null===d||void 0===d?void 0:d.id)===(null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.id)?a(!0):a(!1)}),[d,t]);var l=(0,o.useCallback)((function(){d&&r&&h.default.push("/country/edit?code=".concat(null===t||void 0===t?void 0:t.code,"&momentId=").concat(null===t||void 0===t?void 0:t.id))}),[d,r,t]),u=(0,o.useCallback)((function(){d&&r&&y().delete("/moment/".concat(null===t||void 0===t?void 0:t.id)).then((function(){(0,c.bi)("\ubaa8\uba58\ud2b8\ub97c \uc131\uacf5\uc801\uc73c\ub85c \uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4."),h.default.push("/country/".concat(null===t||void 0===t?void 0:t.code))})).catch((function(e){throw(0,c.p4)(e),e}))}),[d,r,t]);return(0,i.BX)(s,{children:[(0,i.tZ)(g.Z,{user:null===t||void 0===t?void 0:t.user,date:null===t||void 0===t?void 0:t.createdAt}),(0,i.tZ)("div",{className:"right-menu",children:r&&(0,i.BX)(i.HY,{children:[(0,i.tZ)("li",{className:"edit-btn",children:(0,i.tZ)("a",{onClick:l,children:(0,i.tZ)(p.Z,{})})}),(0,i.tZ)(m.Z,{type:"vertical"}),(0,i.tZ)("li",{className:"delete-btn",children:(0,i.tZ)("a",{onClick:function(){return(0,b.u)(u,"\uc815\ub9d0 \uc774 \ubaa8\uba58\ud2b8\ub97c \uc0ad\uc81c\ud560\uae4c\uc694?","\uc0ad\uc81c\ud574\uc8fc\uc138\uc694.")},children:(0,i.tZ)(v.Z,{})})})]})})]})},O=n(13943),k=n(30653),P=n(72504),j=n(36928),_=n(27569),N=n(57206),C=n(839),S=n(46066),X=n(69926),B=n(68985),E=n(48818),D=n(84608),I=n(45145);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={dots:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,autoplay:!1,speed:300,nextArrow:(0,i.tZ)(B.g,{}),prevArrow:(0,i.tZ)(B.$,{})},z=function(e){var t,n=e.moment,r=e.revalidateMoment,a=(0,f.I0)(),d=(0,o.useState)(!1),l=d[0],s=d[1],m=(0,f.v9)((function(e){return e.user})).user,p=(0,E.ZP)("/comment/".concat(null===n||void 0===n?void 0:n.id,"?postType=moment"),D.Z,c.nb),v=p.data,g=p.revalidate;(0,o.useEffect)((function(){var e;m&&(null!==(e=m.likeMoment)&&void 0!==e&&e.find((function(e){return e.momentId===(null===n||void 0===n?void 0:n.id)}))?s(!0):s(!1))}),[m,n]);var h=(0,o.useCallback)((function(e){m?y().patch("/moment/".concat(e,"/").concat(null===n||void 0===n?void 0:n.id)).then((function(){"like"===e?(0,c.bi)("\uc88b\uc544\uc694!\ud83d\udc93"):(0,c.bi)("\uc88b\uc544\uc694 \ucde8\uc18c\ud83d\udc94"),r(),a((0,I.pZ)())})).catch((function(e){throw(0,c.p4)(e),e})):(0,c.p4)("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")}),[m,n]);return(0,i.BX)(u,{children:[(0,i.tZ)(w,{moment:n}),(null===n||void 0===n?void 0:n.images.length)>0&&(0,i.tZ)("div",{className:"image-wrapper",children:(0,i.tZ)(C.Z.PreviewGroup,{children:(0,i.tZ)(S.Z,M(M({},T),{},{children:null===n||void 0===n?void 0:n.images.map((function(e,t){return(0,i.tZ)(C.Z,{preview:{mask:(0,i.tZ)(P.Z,{})},src:e.image_src,alt:"moment-image"},t)}))}))})}),(0,i.tZ)("div",{className:"post-content",children:(0,k.ZP)(null===n||void 0===n?void 0:n.content)}),(0,i.BX)("ul",{className:"post-footer",children:[(0,i.BX)("li",{children:[(0,i.tZ)(j.Z,{}),(0,i.tZ)("span",{className:"count",children:null===v||void 0===v?void 0:v.length}),(0,i.tZ)("span",{children:"\ub313\uae00"})]}),(0,i.BX)("li",{onClick:l?function(){return h("dislike")}:function(){return h("like")},className:l?"liked":"",children:[l?(0,i.tZ)(_.Z,{}):(0,i.tZ)(N.Z,{}),(0,i.tZ)("span",{className:"count",children:null===n||void 0===n||null===(t=n.likedUser)||void 0===t?void 0:t.length}),(0,i.tZ)("span",{children:"\uc88b\uc544\uc694"})]})]}),(0,i.tZ)(X.Z,{revalidateComments:g,isStory:!1}),null===v||void 0===v?void 0:v.map((function(e,t){return(0,i.tZ)(O.Z,{revalidateComments:g,comment:e},t)}))]})},A=n(42697),Y=n(2632),H=n(9008);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=!0,L=function(e){var t,n=e.initialMoments,r=e.initialCountry,l=e.initialMoment,u=(0,h.useRouter)().query,s=(0,o.useState)(""),m=s[0],p=s[1],v=(0,o.useState)(""),f=v[0],g=v[1],b=(0,E.ZP)("/moment/".concat(null===u||void 0===u?void 0:u.code,"/").concat(null===u||void 0===u?void 0:u.momentId,"?uuid=").concat(m),D.Z,F({initialData:l},c.nb)),Z=b.data,y=b.revalidate,w=(0,E.g_)((function(e){return"/moment?code=".concat((null===u||void 0===u?void 0:u.code)||"","&page=").concat(e+1,"&filter=").concat(f,"&type=").concat((null===u||void 0===u?void 0:u.type)||"")}),D.Z,F({initialData:n},c.nb)),O=w.data,k=w.revalidate,P=w.setSize,j=(0,E.ZP)("/country/".concat(null===u||void 0===u?void 0:u.code),D.Z,F({initialData:r},c.nb)).data;return(0,o.useEffect)((function(){localStorage.getItem("client_identifier")&&p(localStorage.getItem("client_identifier"))}),[]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(H.default,{children:(0,i.BX)("title",{children:[null===Z||void 0===Z||null===(t=Z.country)||void 0===t?void 0:t.name,"/",null===Z||void 0===Z?void 0:Z.id,"\ubc88\ubaa8\uba58\ud2b8 - Fall IN Asia"]})}),(0,i.BX)(A.Z,{children:[Z&&(0,i.tZ)(z,{revalidateMoment:y,moment:Z}),(0,i.BX)("h2",{className:"main-title",children:[null===j||void 0===j?void 0:j.name," \uc778\uae30 \uc5f0\ub300\uae30"]}),(0,i.tZ)(Y.Z,{country:j}),(0,i.tZ)("h2",{className:"main-title",children:"\ud3ec\uc2a4\ud305"}),(0,i.tZ)(d.Z,{}),(0,i.tZ)(a.Z,{revalidateMoments:k,filter:f,setFilter:g,setSize:P,moments:O})]})]})}},33578:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/country/[code]/[momentId]",function(){return n(27807)}])},9557:function(){}},function(e){e.O(0,[774,818,737,764,306,524,738,785,368,211,624,976,888,179],(function(){return t=33578,e(e.s=t);var t}));var t=e.O();_N_E=t}]);