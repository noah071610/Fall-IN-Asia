{"version":3,"file":"static/chunks/258-96276ddb43998ae5d34f.js","mappings":"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","sources":["webpack://_N_E/./node_modules/@mapbox/fusspot/lib/index.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/index.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/lib/browser/browser-client.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/lib/browser/browser-layer.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-client.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-error.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-request.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/lib/classes/mapi-response.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/lib/constants.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/lib/helpers/parse-headers.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/lib/helpers/parse-link-header.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/lib/helpers/url-utils.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/node_modules/eventemitter3/index.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/services/geocoding.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/services/service-helpers/create-service-factory.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/services/service-helpers/object-map.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/services/service-helpers/pick.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/services/service-helpers/stringify-booleans.js","webpack://_N_E/./node_modules/@mapbox/mapbox-sdk/services/service-helpers/validator.js","webpack://_N_E/./node_modules/@mapbox/parse-mapbox-token/index.js","webpack://_N_E/./node_modules/base-64/base64.js","webpack://_N_E/./node_modules/events/events.js","webpack://_N_E/./node_modules/fuzzy/lib/fuzzy.js","webpack://_N_E/./node_modules/is-plain-obj/index.js","webpack://_N_E/./node_modules/lodash.debounce/index.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/viewport-mercator-project/dist/esm/math-utils.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/viewport-mercator-project/dist/esm/assert.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/viewport-mercator-project/dist/esm/web-mercator-utils.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/viewport-mercator-project/dist/esm/viewport.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/viewport-mercator-project/dist/esm/fit-bounds.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/viewport-mercator-project/dist/esm/web-mercator-viewport.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/dist/index.m.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/@mapbox/mapbox-gl-geocoder/lib/events.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/@mapbox/mapbox-gl-geocoder/lib/exceptions.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/@mapbox/mapbox-gl-geocoder/lib/index.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/@mapbox/mapbox-gl-geocoder/lib/localization.js","webpack://_N_E/./node_modules/react-map-gl-geocoder/node_modules/nanoid/index.browser.js","webpack://_N_E/./node_modules/subtag/subtag.js","webpack://_N_E/./node_modules/suggestions/index.js","webpack://_N_E/./node_modules/suggestions/src/list.js","webpack://_N_E/./node_modules/suggestions/src/suggestions.js","webpack://_N_E/./node_modules/xtend/immutable.js"],"sourcesContent":["'use strict';\n/**\n * Validators are functions which assert certain type.\n * They can return a string which can then be used\n * to display a helpful error message.\n * They can also return a function for a custom error message.\n */\nvar isPlainObject = require('is-plain-obj');\nvar xtend = require('xtend');\n\nvar DEFAULT_ERROR_PATH = 'value';\nvar NEWLINE_INDENT = '\\n  ';\n\nvar v = {};\n\n/**\n * Runners\n *\n * Take root validators and run assertion\n */\nv.assert = function(rootValidator, options) {\n  options = options || {};\n  return function(value) {\n    var message = validate(rootValidator, value);\n    // all good\n    if (!message) {\n      return;\n    }\n\n    var errorMessage = processMessage(message, options);\n\n    if (options.apiName) {\n      errorMessage = options.apiName + ': ' + errorMessage;\n    }\n\n    throw new Error(errorMessage);\n  };\n};\n\n/**\n * Higher Order Validators\n *\n * validators which take other validators as input\n * and output a new validator\n */\nv.shape = function shape(validatorObj) {\n  var validators = objectEntries(validatorObj);\n  return function shapeValidator(value) {\n    var validationResult = validate(v.plainObject, value);\n\n    if (validationResult) {\n      return validationResult;\n    }\n\n    var key, validator;\n    var errorMessages = [];\n\n    for (var i = 0; i < validators.length; i++) {\n      key = validators[i].key;\n      validator = validators[i].value;\n      validationResult = validate(validator, value[key]);\n\n      if (validationResult) {\n        // return [key].concat(validationResult);\n        errorMessages.push([key].concat(validationResult));\n      }\n    }\n\n    if (errorMessages.length < 2) {\n      return errorMessages[0];\n    }\n\n    // enumerate all the error messages\n    return function(options) {\n      errorMessages = errorMessages.map(function(message) {\n        var key = message[0];\n        var renderedMessage = processMessage(message, options)\n          .split('\\n')\n          .join(NEWLINE_INDENT); // indents any inner nesting\n        return '- ' + key + ': ' + renderedMessage;\n      });\n\n      var objectId = options.path.join('.');\n      var ofPhrase = objectId === DEFAULT_ERROR_PATH ? '' : ' of ' + objectId;\n\n      return (\n        'The following properties' +\n        ofPhrase +\n        ' have invalid values:' +\n        NEWLINE_INDENT +\n        errorMessages.join(NEWLINE_INDENT)\n      );\n    };\n  };\n};\n\nv.strictShape = function strictShape(validatorObj) {\n  var shapeValidator = v.shape(validatorObj);\n  return function strictShapeValidator(value) {\n    var shapeResult = shapeValidator(value);\n    if (shapeResult) {\n      return shapeResult;\n    }\n\n    var invalidKeys = Object.keys(value).reduce(function(memo, valueKey) {\n      if (validatorObj[valueKey] === undefined) {\n        memo.push(valueKey);\n      }\n      return memo;\n    }, []);\n\n    if (invalidKeys.length !== 0) {\n      return function() {\n        return 'The following keys are invalid: ' + invalidKeys.join(', ');\n      };\n    }\n  };\n};\n\nv.arrayOf = function arrayOf(validator) {\n  return createArrayValidator(validator);\n};\n\nv.tuple = function tuple() {\n  var validators = Array.isArray(arguments[0])\n    ? arguments[0]\n    : Array.prototype.slice.call(arguments);\n  return createArrayValidator(validators);\n};\n\n// Currently array validation fails when the first invalid item is found.\nfunction createArrayValidator(validators) {\n  var validatingTuple = Array.isArray(validators);\n  var getValidator = function(index) {\n    if (validatingTuple) {\n      return validators[index];\n    }\n    return validators;\n  };\n\n  return function arrayValidator(value) {\n    var validationResult = validate(v.plainArray, value);\n    if (validationResult) {\n      return validationResult;\n    }\n\n    if (validatingTuple && value.length !== validators.length) {\n      return 'an array with ' + validators.length + ' items';\n    }\n\n    for (var i = 0; i < value.length; i++) {\n      validationResult = validate(getValidator(i), value[i]);\n      if (validationResult) {\n        return [i].concat(validationResult);\n      }\n    }\n  };\n}\n\nv.required = function required(validator) {\n  function requiredValidator(value) {\n    if (value == null) {\n      return function(options) {\n        return formatErrorMessage(\n          options,\n          isArrayCulprit(options.path)\n            ? 'cannot be undefined/null.'\n            : 'is required.'\n        );\n      };\n    }\n    return validator.apply(this, arguments);\n  }\n  requiredValidator.__required = true;\n\n  return requiredValidator;\n};\n\nv.oneOfType = function oneOfType() {\n  var validators = Array.isArray(arguments[0])\n    ? arguments[0]\n    : Array.prototype.slice.call(arguments);\n  return function oneOfTypeValidator(value) {\n    var messages = validators\n      .map(function(validator) {\n        return validate(validator, value);\n      })\n      .filter(Boolean);\n\n    // If we don't have as many messages as no. of validators,\n    // then at least one validator was ok with the value.\n    if (messages.length !== validators.length) {\n      return;\n    }\n\n    // check primitive type\n    if (\n      messages.every(function(message) {\n        return message.length === 1 && typeof message[0] === 'string';\n      })\n    ) {\n      return orList(\n        messages.map(function(m) {\n          return m[0];\n        })\n      );\n    }\n\n    // Complex oneOfTypes like\n    // `v.oneOftypes(v.shape({name: v.string})`, `v.shape({name: v.number}))`\n    // are complex \\_()_/. For the current scope only returning the longest message.\n    return messages.reduce(function(max, arr) {\n      return arr.length > max.length ? arr : max;\n    });\n  };\n};\n\n/**\n * Meta Validators\n * which take options as argument (not validators)\n * and return a new primitive validator\n */\nv.equal = function equal(compareWith) {\n  return function equalValidator(value) {\n    if (value !== compareWith) {\n      return JSON.stringify(compareWith);\n    }\n  };\n};\n\nv.oneOf = function oneOf() {\n  var options = Array.isArray(arguments[0])\n    ? arguments[0]\n    : Array.prototype.slice.call(arguments);\n  var validators = options.map(function(value) {\n    return v.equal(value);\n  });\n\n  return v.oneOfType.apply(this, validators);\n};\n\nv.range = function range(compareWith) {\n  var min = compareWith[0];\n  var max = compareWith[1];\n  return function rangeValidator(value) {\n    var validationResult = validate(v.number, value);\n\n    if (validationResult || value < min || value > max) {\n      return 'number between ' + min + ' & ' + max + ' (inclusive)';\n    }\n  };\n};\n\n/**\n * Primitive validators\n *\n * simple validators which return a string or undefined\n */\nv.any = function any() {\n  return;\n};\n\nv.boolean = function boolean(value) {\n  if (typeof value !== 'boolean') {\n    return 'boolean';\n  }\n};\n\nv.number = function number(value) {\n  if (typeof value !== 'number') {\n    return 'number';\n  }\n};\n\nv.plainArray = function plainArray(value) {\n  if (!Array.isArray(value)) {\n    return 'array';\n  }\n};\n\nv.plainObject = function plainObject(value) {\n  if (!isPlainObject(value)) {\n    return 'object';\n  }\n};\n\nv.string = function string(value) {\n  if (typeof value !== 'string') {\n    return 'string';\n  }\n};\n\nv.func = function func(value) {\n  if (typeof value !== 'function') {\n    return 'function';\n  }\n};\n\nfunction validate(validator, value) {\n  // assertions are optional by default unless wrapped in v.require\n  if (value == null && !validator.hasOwnProperty('__required')) {\n    return;\n  }\n\n  var result = validator(value);\n\n  if (result) {\n    return Array.isArray(result) ? result : [result];\n  }\n}\n\nfunction processMessage(message, options) {\n  // message array follows the convention\n  // [...path, result]\n  // path is an array of object keys / array indices\n  // result is output of the validator\n  var len = message.length;\n\n  var result = message[len - 1];\n  var path = message.slice(0, len - 1);\n\n  if (path.length === 0) {\n    path = [DEFAULT_ERROR_PATH];\n  }\n  options = xtend(options, { path: path });\n\n  return typeof result === 'function'\n    ? result(options) // allows customization of result\n    : formatErrorMessage(options, prettifyResult(result));\n}\n\nfunction orList(list) {\n  if (list.length < 2) {\n    return list[0];\n  }\n  if (list.length === 2) {\n    return list.join(' or ');\n  }\n  return list.slice(0, -1).join(', ') + ', or ' + list.slice(-1);\n}\n\nfunction prettifyResult(result) {\n  return 'must be ' + addArticle(result) + '.';\n}\n\nfunction addArticle(nounPhrase) {\n  if (/^an? /.test(nounPhrase)) {\n    return nounPhrase;\n  }\n  if (/^[aeiou]/i.test(nounPhrase)) {\n    return 'an ' + nounPhrase;\n  }\n  if (/^[a-z]/i.test(nounPhrase)) {\n    return 'a ' + nounPhrase;\n  }\n  return nounPhrase;\n}\n\nfunction formatErrorMessage(options, prettyResult) {\n  var arrayCulprit = isArrayCulprit(options.path);\n  var output = options.path.join('.') + ' ' + prettyResult;\n  var prepend = arrayCulprit ? 'Item at position ' : '';\n\n  return prepend + output;\n}\n\nfunction isArrayCulprit(path) {\n  return typeof path[path.length - 1] == 'number' || typeof path[0] == 'number';\n}\n\nfunction objectEntries(obj) {\n  return Object.keys(obj || {}).map(function(key) {\n    return { key: key, value: obj[key] };\n  });\n}\n\nv.validate = validate;\nv.processMessage = processMessage;\n\nmodule.exports = v;\n","'use strict';\n\nvar client = require('./lib/client');\n\nmodule.exports = client;\n","'use strict';\n\nvar browser = require('./browser-layer');\nvar MapiClient = require('../classes/mapi-client');\n\nfunction BrowserClient(options) {\n  MapiClient.call(this, options);\n}\nBrowserClient.prototype = Object.create(MapiClient.prototype);\nBrowserClient.prototype.constructor = BrowserClient;\n\nBrowserClient.prototype.sendRequest = browser.browserSend;\nBrowserClient.prototype.abortRequest = browser.browserAbort;\n\n/**\n * Create a client for the browser.\n *\n * @param {Object} options\n * @param {string} options.accessToken\n * @param {string} [options.origin]\n * @returns {MapiClient}\n */\nfunction createBrowserClient(options) {\n  return new BrowserClient(options);\n}\n\nmodule.exports = createBrowserClient;\n","'use strict';\n\nvar MapiResponse = require('../classes/mapi-response');\nvar MapiError = require('../classes/mapi-error');\nvar constants = require('../constants');\nvar parseHeaders = require('../helpers/parse-headers');\n\n// Keys are request IDs, values are XHRs.\nvar requestsUnderway = {};\n\nfunction browserAbort(request) {\n  var xhr = requestsUnderway[request.id];\n  if (!xhr) return;\n  xhr.abort();\n  delete requestsUnderway[request.id];\n}\n\nfunction createResponse(request, xhr) {\n  return new MapiResponse(request, {\n    body: xhr.response,\n    headers: parseHeaders(xhr.getAllResponseHeaders()),\n    statusCode: xhr.status\n  });\n}\n\nfunction normalizeBrowserProgressEvent(event) {\n  var total = event.total;\n  var transferred = event.loaded;\n  var percent = (100 * transferred) / total;\n  return {\n    total: total,\n    transferred: transferred,\n    percent: percent\n  };\n}\n\nfunction sendRequestXhr(request, xhr) {\n  return new Promise(function(resolve, reject) {\n    xhr.onprogress = function(event) {\n      request.emitter.emit(\n        constants.EVENT_PROGRESS_DOWNLOAD,\n        normalizeBrowserProgressEvent(event)\n      );\n    };\n\n    var file = request.file;\n    if (file) {\n      xhr.upload.onprogress = function(event) {\n        request.emitter.emit(\n          constants.EVENT_PROGRESS_UPLOAD,\n          normalizeBrowserProgressEvent(event)\n        );\n      };\n    }\n\n    xhr.onerror = function(error) {\n      reject(error);\n    };\n\n    xhr.onabort = function() {\n      var mapiError = new MapiError({\n        request: request,\n        type: constants.ERROR_REQUEST_ABORTED\n      });\n      reject(mapiError);\n    };\n\n    xhr.onload = function() {\n      delete requestsUnderway[request.id];\n      if (xhr.status < 200 || xhr.status >= 400) {\n        var mapiError = new MapiError({\n          request: request,\n          body: xhr.response,\n          statusCode: xhr.status\n        });\n        reject(mapiError);\n        return;\n      }\n      resolve(xhr);\n    };\n\n    var body = request.body;\n\n    // matching service needs to send a www-form-urlencoded request\n    if (typeof body === 'string') {\n      xhr.send(body);\n    } else if (body) {\n      xhr.send(JSON.stringify(body));\n    } else if (file) {\n      xhr.send(file);\n    } else {\n      xhr.send();\n    }\n\n    requestsUnderway[request.id] = xhr;\n  }).then(function(xhr) {\n    return createResponse(request, xhr);\n  });\n}\n\n// The accessToken argument gives this function flexibility\n// for Mapbox's internal client.\nfunction createRequestXhr(request, accessToken) {\n  var url = request.url(accessToken);\n  var xhr = new window.XMLHttpRequest();\n  xhr.open(request.method, url);\n  Object.keys(request.headers).forEach(function(key) {\n    xhr.setRequestHeader(key, request.headers[key]);\n  });\n  return xhr;\n}\n\nfunction browserSend(request) {\n  return Promise.resolve().then(function() {\n    var xhr = createRequestXhr(request, request.client.accessToken);\n    return sendRequestXhr(request, xhr);\n  });\n}\n\nmodule.exports = {\n  browserAbort: browserAbort,\n  sendRequestXhr: sendRequestXhr,\n  browserSend: browserSend,\n  createRequestXhr: createRequestXhr\n};\n","'use strict';\n\nvar parseToken = require('@mapbox/parse-mapbox-token');\nvar MapiRequest = require('./mapi-request');\nvar constants = require('../constants');\n\n/**\n * A low-level Mapbox API client. Use it to create service clients\n * that share the same configuration.\n *\n * Services and `MapiRequest`s use the underlying `MapiClient` to\n * determine how to create, send, and abort requests in a way\n * that is appropriate to the configuration and environment\n * (Node or the browser).\n *\n * @class MapiClient\n * @property {string} accessToken - The Mapbox access token assigned\n *   to this client.\n * @property {string} [origin] - The origin\n *   to use for API requests. Defaults to https://api.mapbox.com.\n */\n\nfunction MapiClient(options) {\n  if (!options || !options.accessToken) {\n    throw new Error('Cannot create a client without an access token');\n  }\n  // Try parsing the access token to determine right away if it's valid.\n  parseToken(options.accessToken);\n\n  this.accessToken = options.accessToken;\n  this.origin = options.origin || constants.API_ORIGIN;\n}\n\nMapiClient.prototype.createRequest = function createRequest(requestOptions) {\n  return new MapiRequest(this, requestOptions);\n};\n\nmodule.exports = MapiClient;\n","'use strict';\n\nvar constants = require('../constants');\n\n/**\n * A Mapbox API error.\n *\n * If there's an error during the API transaction,\n * the Promise returned by `MapiRequest`'s [`send`](#send)\n * method should reject with a `MapiError`.\n *\n * @class MapiError\n * @hideconstructor\n * @property {MapiRequest} request - The errored request.\n * @property {string} type - The type of error. Usually this is `'HttpError'`.\n *   If the request was aborted, so the error was\n *   not sent from the server, the type will be\n *   `'RequestAbortedError'`.\n * @property {number} [statusCode] - The numeric status code of\n *   the HTTP response.\n * @property {Object | string} [body] - If the server sent a response body,\n *   this property exposes that response, parsed as JSON if possible.\n * @property {string} [message] - Whatever message could be derived from the\n *   call site and HTTP response.\n *\n * @param {MapiRequest} options.request\n * @param {number} [options.statusCode]\n * @param {string} [options.body]\n * @param {string} [options.message]\n * @param {string} [options.type]\n */\nfunction MapiError(options) {\n  var errorType = options.type || constants.ERROR_HTTP;\n\n  var body;\n  if (options.body) {\n    try {\n      body = JSON.parse(options.body);\n    } catch (e) {\n      body = options.body;\n    }\n  } else {\n    body = null;\n  }\n\n  var message = options.message || null;\n  if (!message) {\n    if (typeof body === 'string') {\n      message = body;\n    } else if (body && typeof body.message === 'string') {\n      message = body.message;\n    } else if (errorType === constants.ERROR_REQUEST_ABORTED) {\n      message = 'Request aborted';\n    }\n  }\n\n  this.message = message;\n  this.type = errorType;\n  this.statusCode = options.statusCode || null;\n  this.request = options.request;\n  this.body = body;\n}\n\nmodule.exports = MapiError;\n","'use strict';\n\nvar parseToken = require('@mapbox/parse-mapbox-token');\nvar xtend = require('xtend');\nvar EventEmitter = require('eventemitter3');\nvar urlUtils = require('../helpers/url-utils');\nvar constants = require('../constants');\n\nvar requestId = 1;\n\n/**\n * A Mapbox API request.\n *\n * Note that creating a `MapiRequest` does *not* send the request automatically.\n * Use the request's `send` method to send it off and get a `Promise`.\n *\n * The `emitter` property is an `EventEmitter` that emits the following events:\n *\n * - `'response'` - Listeners will be called with a `MapiResponse`.\n * - `'error'` - Listeners will be called with a `MapiError`.\n * - `'downloadProgress'` - Listeners will be called with `ProgressEvents`.\n * - `'uploadProgress'` - Listeners will be called with `ProgressEvents`.\n *   Upload events are only available when the request includes a file.\n *\n * @class MapiRequest\n * @property {EventEmitter} emitter - An event emitter. See above.\n * @property {MapiClient} client - This request's `MapiClient`.\n * @property {MapiResponse|null} response - If this request has been sent and received\n *   a response, the response is available on this property.\n * @property {MapiError|Error|null} error - If this request has been sent and\n *   received an error in response, the error is available on this property.\n * @property {boolean} aborted - If the request has been aborted\n *   (via [`abort`](#abort)), this property will be `true`.\n * @property {boolean} sent - If the request has been sent, this property will\n *   be `true`. You cannot send the same request twice, so if you need to create\n *   a new request that is the equivalent of an existing one, use\n *   [`clone`](#clone).\n * @property {string} path - The request's path, including colon-prefixed route\n *   parameters.\n * @property {string} origin - The request's origin.\n * @property {string} method - The request's HTTP method.\n * @property {Object} query - A query object, which will be transformed into\n *   a URL query string.\n * @property {Object} params - A route parameters object, whose values will\n *   be interpolated the path.\n * @property {Object} headers - The request's headers.\n * @property {Object|string|null} body - Data to send with the request.\n *   If the request has a body, it will also be sent with the header\n *   `'Content-Type: application/json'`.\n * @property {Blob|ArrayBuffer|string|ReadStream} file - A file to\n *   send with the request. The browser client accepts Blobs and ArrayBuffers;\n *   the Node client accepts strings (filepaths) and ReadStreams.\n * @property {string} encoding - The encoding of the response.\n * @property {string} sendFileAs - The method to send the `file`. Options are\n *   `data` (x-www-form-urlencoded) or `form` (multipart/form-data).\n */\n\n/**\n * @ignore\n * @param {MapiClient} client\n * @param {Object} options\n * @param {string} options.method\n * @param {string} options.path\n * @param {Object} [options.query={}]\n * @param {Object} [options.params={}]\n * @param {string} [options.origin]\n * @param {Object} [options.headers]\n * @param {Object} [options.body=null]\n * @param {Blob|ArrayBuffer|string|ReadStream} [options.file=null]\n * @param {string} [options.encoding=utf8]\n */\nfunction MapiRequest(client, options) {\n  if (!client) {\n    throw new Error('MapiRequest requires a client');\n  }\n  if (!options || !options.path || !options.method) {\n    throw new Error(\n      'MapiRequest requires an options object with path and method properties'\n    );\n  }\n\n  var defaultHeaders = {};\n  if (options.body) {\n    defaultHeaders['content-type'] = 'application/json';\n  }\n\n  var headersWithDefaults = xtend(defaultHeaders, options.headers);\n\n  // Disallows duplicate header names of mixed case,\n  // e.g. Content-Type and content-type.\n  var headers = Object.keys(headersWithDefaults).reduce(function(memo, name) {\n    memo[name.toLowerCase()] = headersWithDefaults[name];\n    return memo;\n  }, {});\n\n  this.id = requestId++;\n  this._options = options;\n\n  this.emitter = new EventEmitter();\n  this.client = client;\n  this.response = null;\n  this.error = null;\n  this.sent = false;\n  this.aborted = false;\n  this.path = options.path;\n  this.method = options.method;\n  this.origin = options.origin || client.origin;\n  this.query = options.query || {};\n  this.params = options.params || {};\n  this.body = options.body || null;\n  this.file = options.file || null;\n  this.encoding = options.encoding || 'utf8';\n  this.sendFileAs = options.sendFileAs || null;\n  this.headers = headers;\n}\n\n/**\n * Get the URL of the request.\n *\n * @param {string} [accessToken] - By default, the access token of the request's\n *   client is used.\n * @return {string}\n */\nMapiRequest.prototype.url = function url(accessToken) {\n  var url = urlUtils.prependOrigin(this.path, this.origin);\n  url = urlUtils.appendQueryObject(url, this.query);\n  var routeParams = this.params;\n  var actualAccessToken =\n    accessToken == null ? this.client.accessToken : accessToken;\n  if (actualAccessToken) {\n    url = urlUtils.appendQueryParam(url, 'access_token', actualAccessToken);\n    var accessTokenOwnerId = parseToken(actualAccessToken).user;\n    routeParams = xtend({ ownerId: accessTokenOwnerId }, routeParams);\n  }\n  url = urlUtils.interpolateRouteParams(url, routeParams);\n  return url;\n};\n\n/**\n * Send the request. Returns a Promise that resolves with a `MapiResponse`.\n * You probably want to use `response.body`.\n *\n * `send` only retrieves the first page of paginated results. You can get\n * the next page by using the `MapiResponse`'s [`nextPage`](#nextpage)\n * function, or iterate through all pages using [`eachPage`](#eachpage)\n * instead of `send`.\n *\n * @returns {Promise<MapiResponse>}\n */\nMapiRequest.prototype.send = function send() {\n  var self = this;\n\n  if (self.sent) {\n    throw new Error(\n      'This request has already been sent. Check the response and error properties. Create a new request with clone().'\n    );\n  }\n  self.sent = true;\n\n  return self.client.sendRequest(self).then(\n    function(response) {\n      self.response = response;\n      self.emitter.emit(constants.EVENT_RESPONSE, response);\n      return response;\n    },\n    function(error) {\n      self.error = error;\n      self.emitter.emit(constants.EVENT_ERROR, error);\n      throw error;\n    }\n  );\n};\n\n/**\n * Abort the request.\n *\n * Any pending `Promise` returned by [`send`](#send) will be rejected with\n * an error with `type: 'RequestAbortedError'`. If you've created a request\n * that might be aborted, you need to catch and handle such errors.\n *\n * This method will also abort any requests created while fetching subsequent\n * pages via [`eachPage`](#eachpage).\n *\n * If the request has not been sent or has already been aborted, nothing\n * will happen.\n */\nMapiRequest.prototype.abort = function abort() {\n  if (this._nextPageRequest) {\n    this._nextPageRequest.abort();\n    delete this._nextPageRequest;\n  }\n\n  if (this.response || this.error || this.aborted) return;\n\n  this.aborted = true;\n  this.client.abortRequest(this);\n};\n\n/**\n * Invoke a callback for each page of a paginated API response.\n *\n * The callback should have the following signature:\n *\n * ```js\n * (\n *   error: MapiError,\n *   response: MapiResponse,\n *   next: () => void\n * ) => void\n * ```\n *\n * **The next page will not be fetched until you've invoked the\n * `next` callback**, indicating that you're ready for it.\n *\n * @param {Function} callback\n */\nMapiRequest.prototype.eachPage = function eachPage(callback) {\n  var self = this;\n\n  function handleResponse(response) {\n    function getNextPage() {\n      delete self._nextPageRequest;\n      var nextPageRequest = response.nextPage();\n      if (nextPageRequest) {\n        self._nextPageRequest = nextPageRequest;\n        getPage(nextPageRequest);\n      }\n    }\n    callback(null, response, getNextPage);\n  }\n\n  function handleError(error) {\n    callback(error, null, function() {});\n  }\n\n  function getPage(request) {\n    request.send().then(handleResponse, handleError);\n  }\n  getPage(this);\n};\n\n/**\n * Clone this request.\n *\n * Each request can only be sent *once*. So if you'd like to send the\n * same request again, clone it and send away.\n *\n * @returns {MapiRequest} - A new `MapiRequest` configured just like this one.\n */\nMapiRequest.prototype.clone = function clone() {\n  return this._extend();\n};\n\n/**\n * @ignore\n */\nMapiRequest.prototype._extend = function _extend(options) {\n  var extendedOptions = xtend(this._options, options);\n  return new MapiRequest(this.client, extendedOptions);\n};\n\nmodule.exports = MapiRequest;\n","'use strict';\n\nvar parseLinkHeader = require('../helpers/parse-link-header');\n\n/**\n * A Mapbox API response.\n *\n * @class MapiResponse\n * @property {Object} body - The response body, parsed as JSON.\n * @property {string} rawBody - The raw response body.\n * @property {number} statusCode - The response's status code.\n * @property {Object} headers - The parsed response headers.\n * @property {Object} links - The parsed response links.\n * @property {MapiRequest} request - The response's originating `MapiRequest`.\n */\n\n/**\n * @ignore\n * @param {MapiRequest} request\n * @param {Object} responseData\n * @param {Object} responseData.headers\n * @param {string} responseData.body\n * @param {number} responseData.statusCode\n */\nfunction MapiResponse(request, responseData) {\n  this.request = request;\n  this.headers = responseData.headers;\n  this.rawBody = responseData.body;\n  this.statusCode = responseData.statusCode;\n  try {\n    this.body = JSON.parse(responseData.body || '{}');\n  } catch (parseError) {\n    this.body = responseData.body;\n  }\n  this.links = parseLinkHeader(this.headers.link);\n}\n\n/**\n * Check if there is a next page that you can fetch.\n *\n * @returns {boolean}\n */\nMapiResponse.prototype.hasNextPage = function hasNextPage() {\n  return !!this.links.next;\n};\n\n/**\n * Create a request for the next page, if there is one.\n * If there is no next page, returns `null`.\n *\n * @returns {MapiRequest | null}\n */\nMapiResponse.prototype.nextPage = function nextPage() {\n  if (!this.hasNextPage()) return null;\n  return this.request._extend({\n    path: this.links.next.url\n  });\n};\n\nmodule.exports = MapiResponse;\n","'use strict';\n\nmodule.exports = {\n  API_ORIGIN: 'https://api.mapbox.com',\n  EVENT_PROGRESS_DOWNLOAD: 'downloadProgress',\n  EVENT_PROGRESS_UPLOAD: 'uploadProgress',\n  EVENT_ERROR: 'error',\n  EVENT_RESPONSE: 'response',\n  ERROR_HTTP: 'HttpError',\n  ERROR_REQUEST_ABORTED: 'RequestAbortedError'\n};\n","'use strict';\n\nfunction parseSingleHeader(raw) {\n  var boundary = raw.indexOf(':');\n  var name = raw\n    .substring(0, boundary)\n    .trim()\n    .toLowerCase();\n  var value = raw.substring(boundary + 1).trim();\n  return {\n    name: name,\n    value: value\n  };\n}\n\n/**\n * Parse raw headers into an object with lowercase properties.\n * Does not fully parse headings into more complete data structure,\n * as larger libraries might do. Also does not deal with duplicate\n * headers because Node doesn't seem to deal with those well, so\n * we shouldn't let the browser either, for consistency.\n *\n * @param {string} raw\n * @returns {Object}\n */\nfunction parseHeaders(raw) {\n  var headers = {};\n  if (!raw) {\n    return headers;\n  }\n\n  raw\n    .trim()\n    .split(/[\\r|\\n]+/)\n    .forEach(function(rawHeader) {\n      var parsed = parseSingleHeader(rawHeader);\n      headers[parsed.name] = parsed.value;\n    });\n\n  return headers;\n}\n\nmodule.exports = parseHeaders;\n","'use strict';\n\n// Like https://github.com/thlorenz/lib/parse-link-header but without any\n// additional dependencies.\n\nfunction parseParam(param) {\n  var parts = param.match(/\\s*(.+)\\s*=\\s*\"?([^\"]+)\"?/);\n  if (!parts) return null;\n\n  return {\n    key: parts[1],\n    value: parts[2]\n  };\n}\n\nfunction parseLink(link) {\n  var parts = link.match(/<?([^>]*)>(.*)/);\n  if (!parts) return null;\n\n  var linkUrl = parts[1];\n  var linkParams = parts[2].split(';');\n  var rel = null;\n  var parsedLinkParams = linkParams.reduce(function(result, param) {\n    var parsed = parseParam(param);\n    if (!parsed) return result;\n    if (parsed.key === 'rel') {\n      if (!rel) {\n        rel = parsed.value;\n      }\n      return result;\n    }\n    result[parsed.key] = parsed.value;\n    return result;\n  }, {});\n  if (!rel) return null;\n\n  return {\n    url: linkUrl,\n    rel: rel,\n    params: parsedLinkParams\n  };\n}\n\n/**\n * Parse a Link header.\n *\n * @param {string} linkHeader\n * @returns {{\n *   [string]: {\n *     url: string,\n *     params: { [string]: string }\n *   }\n * }}\n */\nfunction parseLinkHeader(linkHeader) {\n  if (!linkHeader) return {};\n\n  return linkHeader.split(/,\\s*</).reduce(function(result, link) {\n    var parsed = parseLink(link);\n    if (!parsed) return result;\n    // rel value can be multiple whitespace-separated rels.\n    var splitRel = parsed.rel.split(/\\s+/);\n    splitRel.forEach(function(rel) {\n      if (!result[rel]) {\n        result[rel] = {\n          url: parsed.url,\n          params: parsed.params\n        };\n      }\n    });\n    return result;\n  }, {});\n}\n\nmodule.exports = parseLinkHeader;\n","'use strict';\n\n// Encode each item of an array individually. The comma\n// delimiters should not themselves be encoded.\nfunction encodeArray(arrayValue) {\n  return arrayValue.map(encodeURIComponent).join(',');\n}\n\nfunction encodeValue(value) {\n  if (Array.isArray(value)) {\n    return encodeArray(value);\n  }\n  return encodeURIComponent(String(value));\n}\n\n/**\n * Append a query parameter to a URL.\n *\n * @param {string} url\n * @param {string} key\n * @param {string|number|boolean|Array<*>>} [value] - Provide an array\n *   if the value is a list and commas between values need to be\n *   preserved, unencoded.\n * @returns {string} - Modified URL.\n */\nfunction appendQueryParam(url, key, value) {\n  if (value === false || value === null) {\n    return url;\n  }\n  var punctuation = /\\?/.test(url) ? '&' : '?';\n  var query = encodeURIComponent(key);\n  if (value !== undefined && value !== '' && value !== true) {\n    query += '=' + encodeValue(value);\n  }\n  return '' + url + punctuation + query;\n}\n\n/**\n * Derive a query string from an object and append it\n * to a URL.\n *\n * @param {string} url\n * @param {Object} [queryObject] - Values should be primitives.\n * @returns {string} - Modified URL.\n */\nfunction appendQueryObject(url, queryObject) {\n  if (!queryObject) {\n    return url;\n  }\n\n  var result = url;\n  Object.keys(queryObject).forEach(function(key) {\n    var value = queryObject[key];\n    if (value === undefined) {\n      return;\n    }\n    if (Array.isArray(value)) {\n      value = value\n        .filter(function(v) {\n          return v !== null && v !== undefined;\n        })\n        .join(',');\n    }\n    result = appendQueryParam(result, key, value);\n  });\n  return result;\n}\n\n/**\n * Prepend an origin to a URL. If the URL already has an\n * origin, do nothing.\n *\n * @param {string} url\n * @param {string} origin\n * @returns {string} - Modified URL.\n */\nfunction prependOrigin(url, origin) {\n  if (!origin) {\n    return url;\n  }\n\n  if (url.slice(0, 4) === 'http') {\n    return url;\n  }\n\n  var delimiter = url[0] === '/' ? '' : '/';\n  return '' + origin.replace(/\\/$/, '') + delimiter + url;\n}\n\n/**\n * Interpolate values into a route with express-style,\n * colon-prefixed route parameters.\n *\n * @param {string} route\n * @param {Object} [params] - Values should be primitives\n *   or arrays of primitives. Provide an array if the value\n *   is a list and commas between values need to be\n *   preserved, unencoded.\n * @returns {string} - Modified URL.\n */\nfunction interpolateRouteParams(route, params) {\n  if (!params) {\n    return route;\n  }\n  return route.replace(/\\/:([a-zA-Z0-9]+)/g, function(_, paramId) {\n    var value = params[paramId];\n    if (value === undefined) {\n      throw new Error('Unspecified route parameter ' + paramId);\n    }\n    var preppedValue = encodeValue(value);\n    return '/' + preppedValue;\n  });\n}\n\nmodule.exports = {\n  appendQueryObject: appendQueryObject,\n  appendQueryParam: appendQueryParam,\n  prependOrigin: prependOrigin,\n  interpolateRouteParams: interpolateRouteParams\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\n\nvar xtend = require('xtend');\nvar v = require('./service-helpers/validator');\nvar pick = require('./service-helpers/pick');\nvar stringifyBooleans = require('./service-helpers/stringify-booleans');\nvar createServiceFactory = require('./service-helpers/create-service-factory');\n\n/**\n * Geocoding API service.\n *\n * Learn more about this service and its responses in\n * [the HTTP service documentation](https://docs.mapbox.com/api/search/#geocoding).\n */\nvar Geocoding = {};\n\nvar featureTypes = [\n  'country',\n  'region',\n  'postcode',\n  'district',\n  'place',\n  'locality',\n  'neighborhood',\n  'address',\n  'poi',\n  'poi.landmark'\n];\n\n/**\n * Search for a place.\n *\n * See the [public documentation](https://docs.mapbox.com/api/search/#forward-geocoding).\n *\n * @param {Object} config\n * @param {string} config.query - A place name.\n * @param {'mapbox.places'|'mapbox.places-permanent'} [config.mode=\"mapbox.places\"] - Either `mapbox.places` for ephemeral geocoding, or `mapbox.places-permanent` for storing results and batch geocoding.\n * @param {Array<string>} [config.countries] - Limits results to the specified countries.\n *   Each item in the array should be an [ISO 3166 alpha 2 country code](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2).\n * @param {Coordinates} [config.proximity] - Bias local results based on a provided location.\n * @param {Array<'country'|'region'|'postcode'|'district'|'place'|'locality'|'neighborhood'|'address'|'poi'|'poi.landmark'>} [config.types] - Filter results by feature types.\n * @param {boolean} [config.autocomplete=true] - Return autocomplete results or not.\n * @param {BoundingBox} [config.bbox] - Limit results to a bounding box.\n * @param {number} [config.limit=5] - Limit the number of results returned.\n * @param {Array<string>} [config.language] - Specify the language to use for response text and, for forward geocoding, query result weighting.\n *  Options are [IETF language tags](https://en.wikipedia.org/wiki/IETF_language_tag) comprised of a mandatory\n *  [ISO 639-1 language code](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) and optionally one or more IETF subtags for country or script.\n * @param {boolean} [config.routing=false] - Specify whether to request additional metadata about the recommended navigation destination. Only applicable for address features.\n * @return {MapiRequest}\n *\n * @example\n * geocodingClient.forwardGeocode({\n *   query: 'Paris, France',\n *   limit: 2\n * })\n *   .send()\n *   .then(response => {\n *     const match = response.body;\n *   });\n *\n * @example\n * // geocoding with proximity\n * geocodingClient.forwardGeocode({\n *   query: 'Paris, France',\n *   proximity: [-95.4431142, 33.6875431]\n * })\n *   .send()\n *   .then(response => {\n *     const match = response.body;\n *   });\n *\n * // geocoding with countries\n * geocodingClient.forwardGeocode({\n *   query: 'Paris, France',\n *   countries: ['fr']\n * })\n *   .send()\n *   .then(response => {\n *     const match = response.body;\n *   });\n *\n * // geocoding with bounding box\n * geocodingClient.forwardGeocode({\n *   query: 'Paris, France',\n *   bbox: [2.14, 48.72, 2.55, 48.96]\n * })\n *   .send()\n *   .then(response => {\n *     const match = response.body;\n *   });\n */\nGeocoding.forwardGeocode = function(config) {\n  v.assertShape({\n    query: v.required(v.string),\n    mode: v.oneOf('mapbox.places', 'mapbox.places-permanent'),\n    countries: v.arrayOf(v.string),\n    proximity: v.coordinates,\n    types: v.arrayOf(v.oneOf(featureTypes)),\n    autocomplete: v.boolean,\n    bbox: v.arrayOf(v.number),\n    limit: v.number,\n    language: v.arrayOf(v.string),\n    routing: v.boolean\n  })(config);\n\n  config.mode = config.mode || 'mapbox.places';\n\n  var query = stringifyBooleans(\n    xtend(\n      { country: config.countries },\n      pick(config, [\n        'proximity',\n        'types',\n        'autocomplete',\n        'bbox',\n        'limit',\n        'language',\n        'routing'\n      ])\n    )\n  );\n\n  return this.client.createRequest({\n    method: 'GET',\n    path: '/geocoding/v5/:mode/:query.json',\n    params: pick(config, ['mode', 'query']),\n    query: query\n  });\n};\n\n/**\n * Search for places near coordinates.\n *\n * See the [public documentation](https://docs.mapbox.com/api/search/#reverse-geocoding).\n *\n * @param {Object} config\n * @param {Coordinates} config.query - Coordinates at which features will be searched.\n * @param {'mapbox.places'|'mapbox.places-permanent'} [config.mode=\"mapbox.places\"] - Either `mapbox.places` for ephemeral geocoding, or `mapbox.places-permanent` for storing results and batch geocoding.\n * @param {Array<string>} [config.countries] - Limits results to the specified countries.\n *   Each item in the array should be an [ISO 3166 alpha 2 country code](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2).\n * @param {Array<'country'|'region'|'postcode'|'district'|'place'|'locality'|'neighborhood'|'address'|'poi'|'poi.landmark'>} [config.types] - Filter results by feature types.\n * @param {BoundingBox} [config.bbox] - Limit results to a bounding box.\n * @param {number} [config.limit=1] - Limit the number of results returned. If using this option, you must provide a single item for `types`.\n * @param {Array<string>} [config.language] - Specify the language to use for response text and, for forward geocoding, query result weighting.\n *  Options are [IETF language tags](https://en.wikipedia.org/wiki/IETF_language_tag) comprised of a mandatory\n *  [ISO 639-1 language code](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) and optionally one or more IETF subtags for country or script.\n * @param {'distance'|'score'} [config.reverseMode='distance'] - Set the factors that are used to sort nearby results.\n * @param {boolean} [config.routing=false] - Specify whether to request additional metadata about the recommended navigation destination. Only applicable for address features.\n * @return {MapiRequest}\n *\n * @example\n * geocodingClient.reverseGeocode({\n *   query: [-95.4431142, 33.6875431]\n * })\n *   .send()\n *   .then(response => {\n *     // GeoJSON document with geocoding matches\n *     const match = response.body;\n *   });\n */\nGeocoding.reverseGeocode = function(config) {\n  v.assertShape({\n    query: v.required(v.coordinates),\n    mode: v.oneOf('mapbox.places', 'mapbox.places-permanent'),\n    countries: v.arrayOf(v.string),\n    types: v.arrayOf(v.oneOf(featureTypes)),\n    bbox: v.arrayOf(v.number),\n    limit: v.number,\n    language: v.arrayOf(v.string),\n    reverseMode: v.oneOf('distance', 'score'),\n    routing: v.boolean\n  })(config);\n\n  config.mode = config.mode || 'mapbox.places';\n\n  var query = stringifyBooleans(\n    xtend(\n      { country: config.countries },\n      pick(config, [\n        'country',\n        'types',\n        'bbox',\n        'limit',\n        'language',\n        'reverseMode',\n        'routing'\n      ])\n    )\n  );\n\n  return this.client.createRequest({\n    method: 'GET',\n    path: '/geocoding/v5/:mode/:query.json',\n    params: pick(config, ['mode', 'query']),\n    query: query\n  });\n};\n\nmodule.exports = createServiceFactory(Geocoding);\n","'use strict';\n\nvar MapiClient = require('../../lib/classes/mapi-client');\n// This will create the environment-appropriate client.\nvar createClient = require('../../lib/client');\n\nfunction createServiceFactory(ServicePrototype) {\n  return function(clientOrConfig) {\n    var client;\n    if (MapiClient.prototype.isPrototypeOf(clientOrConfig)) {\n      client = clientOrConfig;\n    } else {\n      client = createClient(clientOrConfig);\n    }\n    var service = Object.create(ServicePrototype);\n    service.client = client;\n    return service;\n  };\n}\n\nmodule.exports = createServiceFactory;\n","'use strict';\n\nfunction objectMap(obj, cb) {\n  return Object.keys(obj).reduce(function(result, key) {\n    result[key] = cb(key, obj[key]);\n    return result;\n  }, {});\n}\n\nmodule.exports = objectMap;\n","'use strict';\n\n/**\n * Create a new object by picking properties off an existing object.\n * The second param can be overloaded as a callback for\n * more fine grained picking of properties.\n * @param {Object} source\n * @param {Array<string>|function(string, Object):boolean} keys\n * @returns {Object}\n */\nfunction pick(source, keys) {\n  var filter = function(key, val) {\n    return keys.indexOf(key) !== -1 && val !== undefined;\n  };\n\n  if (typeof keys === 'function') {\n    filter = keys;\n  }\n\n  return Object.keys(source)\n    .filter(function(key) {\n      return filter(key, source[key]);\n    })\n    .reduce(function(result, key) {\n      result[key] = source[key];\n      return result;\n    }, {});\n}\n\nmodule.exports = pick;\n","'use strict';\n\nvar objectMap = require('./object-map');\n\n/**\n * Stringify all the boolean values in an object, so true becomes \"true\".\n *\n * @param {Object} obj\n * @returns {Object}\n */\nfunction stringifyBoolean(obj) {\n  return objectMap(obj, function(_, value) {\n    return typeof value === 'boolean' ? JSON.stringify(value) : value;\n  });\n}\n\nmodule.exports = stringifyBoolean;\n","'use strict';\n\nvar xtend = require('xtend');\nvar v = require('@mapbox/fusspot');\n\nfunction file(value) {\n  // If we're in a browser so Blob is available, the file must be that.\n  // In Node, however, it could be a filepath or a pipeable (Readable) stream.\n  if (typeof window !== 'undefined') {\n    if (value instanceof global.Blob || value instanceof global.ArrayBuffer) {\n      return;\n    }\n    return 'Blob or ArrayBuffer';\n  }\n  if (typeof value === 'string' || value.pipe !== undefined) {\n    return;\n  }\n  return 'Filename or Readable stream';\n}\n\nfunction assertShape(validatorObj, apiName) {\n  return v.assert(v.strictShape(validatorObj), apiName);\n}\n\nfunction date(value) {\n  var msg = 'date';\n  if (typeof value === 'boolean') {\n    return msg;\n  }\n  try {\n    var date = new Date(value);\n    if (date.getTime && isNaN(date.getTime())) {\n      return msg;\n    }\n  } catch (e) {\n    return msg;\n  }\n}\n\nfunction coordinates(value) {\n  return v.tuple(v.number, v.number)(value);\n}\n\nmodule.exports = xtend(v, {\n  file: file,\n  date: date,\n  coordinates: coordinates,\n  assertShape: assertShape\n});\n","'use strict';\n\nvar base64 = require('base-64');\n\nvar tokenCache = {};\n\nfunction parseToken(token) {\n  if (tokenCache[token]) {\n    return tokenCache[token];\n  }\n\n  var parts = token.split('.');\n  var usage = parts[0];\n  var rawPayload = parts[1];\n  if (!rawPayload) {\n    throw new Error('Invalid token');\n  }\n\n  var parsedPayload = parsePaylod(rawPayload);\n\n  var result = {\n    usage: usage,\n    user: parsedPayload.u\n  };\n  if (has(parsedPayload, 'a')) result.authorization = parsedPayload.a;\n  if (has(parsedPayload, 'exp')) result.expires = parsedPayload.exp * 1000;\n  if (has(parsedPayload, 'iat')) result.created = parsedPayload.iat * 1000;\n  if (has(parsedPayload, 'scopes')) result.scopes = parsedPayload.scopes;\n  if (has(parsedPayload, 'client')) result.client = parsedPayload.client;\n  if (has(parsedPayload, 'll')) result.lastLogin = parsedPayload.ll;\n  if (has(parsedPayload, 'iu')) result.impersonator = parsedPayload.iu;\n\n  tokenCache[token] = result;\n  return result;\n}\n\nfunction parsePaylod(rawPayload) {\n  try {\n    return JSON.parse(base64.decode(rawPayload));\n  } catch (parseError) {\n    throw new Error('Invalid token');\n  }\n}\n\nfunction has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nmodule.exports = parseToken;\n","/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atks excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar d;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '0.1.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/*\n * Fuzzy\n * https://github.com/myork/fuzzy\n *\n * Copyright (c) 2012 Matt York\n * Licensed under the MIT license.\n */\n\n(function() {\n\nvar root = this;\n\nvar fuzzy = {};\n\n// Use in node or in browser\nif (typeof exports !== 'undefined') {\n  module.exports = fuzzy;\n} else {\n  root.fuzzy = fuzzy;\n}\n\n// Return all elements of `array` that have a fuzzy\n// match against `pattern`.\nfuzzy.simpleFilter = function(pattern, array) {\n  return array.filter(function(str) {\n    return fuzzy.test(pattern, str);\n  });\n};\n\n// Does `pattern` fuzzy match `str`?\nfuzzy.test = function(pattern, str) {\n  return fuzzy.match(pattern, str) !== null;\n};\n\n// If `pattern` matches `str`, wrap each matching character\n// in `opts.pre` and `opts.post`. If no match, return null\nfuzzy.match = function(pattern, str, opts) {\n  opts = opts || {};\n  var patternIdx = 0\n    , result = []\n    , len = str.length\n    , totalScore = 0\n    , currScore = 0\n    // prefix\n    , pre = opts.pre || ''\n    // suffix\n    , post = opts.post || ''\n    // String to compare against. This might be a lowercase version of the\n    // raw string\n    , compareString =  opts.caseSensitive && str || str.toLowerCase()\n    , ch;\n\n  pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n\n  // For each character in the string, either add it to the result\n  // or wrap in template if it's the next string in the pattern\n  for(var idx = 0; idx < len; idx++) {\n    ch = str[idx];\n    if(compareString[idx] === pattern[patternIdx]) {\n      ch = pre + ch + post;\n      patternIdx += 1;\n\n      // consecutive characters should increase the score more than linearly\n      currScore += 1 + currScore;\n    } else {\n      currScore = 0;\n    }\n    totalScore += currScore;\n    result[result.length] = ch;\n  }\n\n  // return rendered string if we have a match for every char\n  if(patternIdx === pattern.length) {\n    // if the string is an exact match with pattern, totalScore should be maxed\n    totalScore = (compareString === pattern) ? Infinity : totalScore;\n    return {rendered: result.join(''), score: totalScore};\n  }\n\n  return null;\n};\n\n// The normal entry point. Filters `arr` for matches against `pattern`.\n// It returns an array with matching values of the type:\n//\n//     [{\n//         string:   '<b>lah' // The rendered string\n//       , index:    2        // The index of the element in `arr`\n//       , original: 'blah'   // The original element in `arr`\n//     }]\n//\n// `opts` is an optional argument bag. Details:\n//\n//    opts = {\n//        // string to put before a matching character\n//        pre:     '<b>'\n//\n//        // string to put after matching character\n//      , post:    '</b>'\n//\n//        // Optional function. Input is an entry in the given arr`,\n//        // output should be the string to test `pattern` against.\n//        // In this example, if `arr = [{crying: 'koala'}]` we would return\n//        // 'koala'.\n//      , extract: function(arg) { return arg.crying; }\n//    }\nfuzzy.filter = function(pattern, arr, opts) {\n  if(!arr || arr.length === 0) {\n    return [];\n  }\n  if (typeof pattern !== 'string') {\n    return arr;\n  }\n  opts = opts || {};\n  return arr\n    .reduce(function(prev, element, idx, arr) {\n      var str = element;\n      if(opts.extract) {\n        str = opts.extract(element);\n      }\n      var rendered = fuzzy.match(pattern, str, opts);\n      if(rendered != null) {\n        prev[prev.length] = {\n            string: rendered.rendered\n          , score: rendered.score\n          , index: idx\n          , original: element\n        };\n      }\n      return prev;\n    }, [])\n\n    // Sort by score. Browsers are inconsistent wrt stable/unstable\n    // sorting, so force stable by using the index in the case of tie.\n    // See http://ofb.net/~sethml/is-sort-stable.html\n    .sort(function(a,b) {\n      var compare = b.score - a.score;\n      if(compare) return compare;\n      return a.index - b.index;\n    });\n};\n\n\n}());\n\n","'use strict';\nvar toString = Object.prototype.toString;\n\nmodule.exports = function (x) {\n\tvar prototype;\n\treturn toString.call(x) === '[object Object]' && (prototype = Object.getPrototypeOf(x), prototype === null || prototype === Object.getPrototypeOf({}));\n};\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","import * as vec4 from 'gl-matrix/vec4';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function transformVector(matrix, vector) {\n  var result = vec4.transformMat4([], vector, matrix);\n  vec4.scale(result, result, 1 / result[3]);\n  return result;\n}\nexport function mod(value, divisor) {\n  var modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n  return step * end + (1 - step) * start;\n}\n//# sourceMappingURL=math-utils.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'viewport-mercator-project: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { createMat4, transformVector } from './math-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport assert from './assert';\nvar PI = Math.PI;\nvar PI_4 = PI / 4;\nvar DEGREES_TO_RADIANS = PI / 180;\nvar RADIANS_TO_DEGREES = 180 / PI;\nvar TILE_SIZE = 512;\nvar EARTH_CIRCUMFERENCE = 40.03e6;\nvar DEFAULT_ALTITUDE = 1.5;\nexport function zoomToScale(zoom) {\n  return Math.pow(2, zoom);\n}\nexport function scaleToZoom(scale) {\n  return Math.log2(scale);\n}\nexport function lngLatToWorld(_ref, scale) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      lng = _ref2[0],\n      lat = _ref2[1];\n\n  assert(Number.isFinite(lng) && Number.isFinite(scale));\n  assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n  scale *= TILE_SIZE;\n  var lambda2 = lng * DEGREES_TO_RADIANS;\n  var phi2 = lat * DEGREES_TO_RADIANS;\n  var x = scale * (lambda2 + PI) / (2 * PI);\n  var y = scale * (PI - Math.log(Math.tan(PI_4 + phi2 * 0.5))) / (2 * PI);\n  return [x, y];\n}\nexport function worldToLngLat(_ref3, scale) {\n  var _ref4 = _slicedToArray(_ref3, 2),\n      x = _ref4[0],\n      y = _ref4[1];\n\n  scale *= TILE_SIZE;\n  var lambda2 = x / scale * (2 * PI) - PI;\n  var phi2 = 2 * (Math.atan(Math.exp(PI - y / scale * (2 * PI))) - PI_4);\n  return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\nexport function getMeterZoom(_ref5) {\n  var latitude = _ref5.latitude;\n  assert(Number.isFinite(latitude));\n  var latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\nexport function getDistanceScales(_ref6) {\n  var latitude = _ref6.latitude,\n      longitude = _ref6.longitude,\n      zoom = _ref6.zoom,\n      scale = _ref6.scale,\n      _ref6$highPrecision = _ref6.highPrecision,\n      highPrecision = _ref6$highPrecision === void 0 ? false : _ref6$highPrecision;\n  scale = scale !== undefined ? scale : zoomToScale(zoom);\n  assert(Number.isFinite(latitude) && Number.isFinite(longitude) && Number.isFinite(scale));\n  var result = {};\n  var worldSize = TILE_SIZE * scale;\n  var latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  var pixelsPerDegreeX = worldSize / 360;\n  var pixelsPerDegreeY = pixelsPerDegreeX / latCosine;\n  var altPixelsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n  result.pixelsPerMeter = [altPixelsPerMeter, -altPixelsPerMeter, altPixelsPerMeter];\n  result.metersPerPixel = [1 / altPixelsPerMeter, -1 / altPixelsPerMeter, 1 / altPixelsPerMeter];\n  result.pixelsPerDegree = [pixelsPerDegreeX, -pixelsPerDegreeY, altPixelsPerMeter];\n  result.degreesPerPixel = [1 / pixelsPerDegreeX, -1 / pixelsPerDegreeY, 1 / altPixelsPerMeter];\n\n  if (highPrecision) {\n    var latCosine2 = DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS) / latCosine;\n    var pixelsPerDegreeY2 = pixelsPerDegreeX * latCosine2 / 2;\n    var altPixelsPerDegree2 = worldSize / EARTH_CIRCUMFERENCE * latCosine2;\n    var altPixelsPerMeter2 = altPixelsPerDegree2 / pixelsPerDegreeY * altPixelsPerMeter;\n    result.pixelsPerDegree2 = [0, -pixelsPerDegreeY2, altPixelsPerDegree2];\n    result.pixelsPerMeter2 = [altPixelsPerMeter2, 0, altPixelsPerMeter2];\n  }\n\n  return result;\n}\nexport function addMetersToLngLat(lngLatZ, xyz) {\n  var _lngLatZ = _slicedToArray(lngLatZ, 3),\n      longitude = _lngLatZ[0],\n      latitude = _lngLatZ[1],\n      z0 = _lngLatZ[2];\n\n  var _xyz = _slicedToArray(xyz, 3),\n      x = _xyz[0],\n      y = _xyz[1],\n      z = _xyz[2];\n\n  var scale = 1;\n\n  var _getDistanceScales = getDistanceScales({\n    longitude: longitude,\n    latitude: latitude,\n    scale: scale,\n    highPrecision: true\n  }),\n      pixelsPerMeter = _getDistanceScales.pixelsPerMeter,\n      pixelsPerMeter2 = _getDistanceScales.pixelsPerMeter2;\n\n  var worldspace = lngLatToWorld(lngLatZ, scale);\n  worldspace[0] += x * (pixelsPerMeter[0] + pixelsPerMeter2[0] * y);\n  worldspace[1] += y * (pixelsPerMeter[1] + pixelsPerMeter2[1] * y);\n  var newLngLat = worldToLngLat(worldspace, scale);\n  var newZ = (z0 || 0) + (z || 0);\n  return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\nexport function getViewMatrix(_ref7) {\n  var height = _ref7.height,\n      pitch = _ref7.pitch,\n      bearing = _ref7.bearing,\n      altitude = _ref7.altitude,\n      _ref7$center = _ref7.center,\n      center = _ref7$center === void 0 ? null : _ref7$center,\n      _ref7$flipY = _ref7.flipY,\n      flipY = _ref7$flipY === void 0 ? false : _ref7$flipY;\n  var vm = createMat4();\n  mat4.translate(vm, vm, [0, 0, -altitude]);\n  mat4.scale(vm, vm, [1, 1, 1 / height]);\n  mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n  mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n\n  if (flipY) {\n    mat4.scale(vm, vm, [1, -1, 1]);\n  }\n\n  if (center) {\n    mat4.translate(vm, vm, vec3.negate([], center));\n  }\n\n  return vm;\n}\nexport function getProjectionParameters(_ref8) {\n  var width = _ref8.width,\n      height = _ref8.height,\n      _ref8$altitude = _ref8.altitude,\n      altitude = _ref8$altitude === void 0 ? DEFAULT_ALTITUDE : _ref8$altitude,\n      _ref8$pitch = _ref8.pitch,\n      pitch = _ref8$pitch === void 0 ? 0 : _ref8$pitch,\n      _ref8$nearZMultiplier = _ref8.nearZMultiplier,\n      nearZMultiplier = _ref8$nearZMultiplier === void 0 ? 1 : _ref8$nearZMultiplier,\n      _ref8$farZMultiplier = _ref8.farZMultiplier,\n      farZMultiplier = _ref8$farZMultiplier === void 0 ? 1 : _ref8$farZMultiplier;\n  var pitchRadians = pitch * DEGREES_TO_RADIANS;\n  var halfFov = Math.atan(0.5 / altitude);\n  var topHalfSurfaceDistance = Math.sin(halfFov) * altitude / Math.sin(Math.PI / 2 - pitchRadians - halfFov);\n  var farZ = Math.cos(Math.PI / 2 - pitchRadians) * topHalfSurfaceDistance + altitude;\n  return {\n    fov: 2 * Math.atan(height / 2 / altitude),\n    aspect: width / height,\n    focalDistance: altitude,\n    near: nearZMultiplier,\n    far: farZ * farZMultiplier\n  };\n}\nexport function getProjectionMatrix(_ref9) {\n  var width = _ref9.width,\n      height = _ref9.height,\n      pitch = _ref9.pitch,\n      altitude = _ref9.altitude,\n      nearZMultiplier = _ref9.nearZMultiplier,\n      farZMultiplier = _ref9.farZMultiplier;\n\n  var _getProjectionParamet = getProjectionParameters({\n    width: width,\n    height: height,\n    altitude: altitude,\n    pitch: pitch,\n    nearZMultiplier: nearZMultiplier,\n    farZMultiplier: farZMultiplier\n  }),\n      fov = _getProjectionParamet.fov,\n      aspect = _getProjectionParamet.aspect,\n      near = _getProjectionParamet.near,\n      far = _getProjectionParamet.far;\n\n  var projectionMatrix = mat4.perspective([], fov, aspect, near, far);\n  return projectionMatrix;\n}\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n  var _xyz2 = _slicedToArray(xyz, 3),\n      x = _xyz2[0],\n      y = _xyz2[1],\n      _xyz2$ = _xyz2[2],\n      z = _xyz2$ === void 0 ? 0 : _xyz2$;\n\n  assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n  return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix) {\n  var targetZ = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  var _xyz3 = _slicedToArray(xyz, 3),\n      x = _xyz3[0],\n      y = _xyz3[1],\n      z = _xyz3[2];\n\n  assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n\n  if (Number.isFinite(z)) {\n    var coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n    return coord;\n  }\n\n  var coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n  var coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n  var z0 = coord0[2];\n  var z1 = coord1[2];\n  var t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n  return vec2.lerp([], coord0, coord1, t);\n}\n//# sourceMappingURL=web-mercator-utils.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { createMat4 } from './math-utils';\nimport { worldToPixels, pixelsToWorld } from './web-mercator-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nvar IDENTITY = createMat4();\n\nvar Viewport = function () {\n  function Viewport() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        width = _ref.width,\n        height = _ref.height,\n        _ref$viewMatrix = _ref.viewMatrix,\n        viewMatrix = _ref$viewMatrix === void 0 ? IDENTITY : _ref$viewMatrix,\n        _ref$projectionMatrix = _ref.projectionMatrix,\n        projectionMatrix = _ref$projectionMatrix === void 0 ? IDENTITY : _ref$projectionMatrix;\n\n    _classCallCheck(this, Viewport);\n\n    this.width = width || 1;\n    this.height = height || 1;\n    this.scale = 1;\n    this.pixelsPerMeter = 1;\n    this.viewMatrix = viewMatrix;\n    this.projectionMatrix = projectionMatrix;\n    var vpm = createMat4();\n    mat4.multiply(vpm, vpm, this.projectionMatrix);\n    mat4.multiply(vpm, vpm, this.viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    var m = createMat4();\n    mat4.scale(m, m, [this.width / 2, -this.height / 2, 1]);\n    mat4.translate(m, m, [1, -1, 0]);\n    mat4.multiply(m, m, this.viewProjectionMatrix);\n    var mInverse = mat4.invert(createMat4(), m);\n\n    if (!mInverse) {\n      throw new Error('Pixel project matrix not invertible');\n    }\n\n    this.pixelProjectionMatrix = m;\n    this.pixelUnprojectionMatrix = mInverse;\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  _createClass(Viewport, [{\n    key: \"equals\",\n    value: function equals(viewport) {\n      if (!(viewport instanceof Viewport)) {\n        return false;\n      }\n\n      return viewport.width === this.width && viewport.height === this.height && mat4.equals(viewport.projectionMatrix, this.projectionMatrix) && mat4.equals(viewport.viewMatrix, this.viewMatrix);\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$topLeft = _ref2.topLeft,\n          topLeft = _ref2$topLeft === void 0 ? true : _ref2$topLeft;\n\n      var worldPosition = this.projectPosition(xyz);\n      var coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n\n      var _coord = _slicedToArray(coord, 2),\n          x = _coord[0],\n          y = _coord[1];\n\n      var y2 = topLeft ? y : this.height - y;\n      return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz) {\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$topLeft = _ref3.topLeft,\n          topLeft = _ref3$topLeft === void 0 ? true : _ref3$topLeft,\n          targetZ = _ref3.targetZ;\n\n      var _xyz = _slicedToArray(xyz, 3),\n          x = _xyz[0],\n          y = _xyz[1],\n          z = _xyz[2];\n\n      var y2 = topLeft ? y : this.height - y;\n      var targetZWorld = targetZ && targetZ * this.pixelsPerMeter;\n      var coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n\n      var _this$unprojectPositi = this.unprojectPosition(coord),\n          _this$unprojectPositi2 = _slicedToArray(_this$unprojectPositi, 3),\n          X = _this$unprojectPositi2[0],\n          Y = _this$unprojectPositi2[1],\n          Z = _this$unprojectPositi2[2];\n\n      if (Number.isFinite(z)) {\n        return [X, Y, Z];\n      }\n\n      return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      var _this$projectFlat = this.projectFlat(xyz),\n          _this$projectFlat2 = _slicedToArray(_this$projectFlat, 2),\n          X = _this$projectFlat2[0],\n          Y = _this$projectFlat2[1];\n\n      var Z = (xyz[2] || 0) * this.pixelsPerMeter;\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"unprojectPosition\",\n    value: function unprojectPosition(xyz) {\n      var _this$unprojectFlat = this.unprojectFlat(xyz),\n          _this$unprojectFlat2 = _slicedToArray(_this$unprojectFlat, 2),\n          X = _this$unprojectFlat2[0],\n          Y = _this$unprojectFlat2[1];\n\n      var Z = (xyz[2] || 0) / this.pixelsPerMeter;\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"projectFlat\",\n    value: function projectFlat(xyz) {\n      var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.scale;\n      return xyz;\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xyz) {\n      var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.scale;\n      return xyz;\n    }\n  }]);\n\n  return Viewport;\n}();\n\nexport { Viewport as default };\n//# sourceMappingURL=viewport.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport WebMercatorViewport from './web-mercator-viewport';\nimport assert from './assert';\nexport default function fitBounds(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      bounds = _ref.bounds,\n      _ref$padding = _ref.padding,\n      padding = _ref$padding === void 0 ? 0 : _ref$padding,\n      _ref$offset = _ref.offset,\n      offset = _ref$offset === void 0 ? [0, 0] : _ref$offset;\n\n  var _bounds = _slicedToArray(bounds, 2),\n      _bounds$ = _slicedToArray(_bounds[0], 2),\n      west = _bounds$[0],\n      south = _bounds$[1],\n      _bounds$2 = _slicedToArray(_bounds[1], 2),\n      east = _bounds$2[0],\n      north = _bounds$2[1];\n\n  if (Number.isFinite(padding)) {\n    var p = padding;\n    padding = {\n      top: p,\n      bottom: p,\n      left: p,\n      right: p\n    };\n  } else {\n    assert(Number.isFinite(padding.top) && Number.isFinite(padding.bottom) && Number.isFinite(padding.left) && Number.isFinite(padding.right));\n  }\n\n  var viewport = new WebMercatorViewport({\n    width: width,\n    height: height,\n    longitude: 0,\n    latitude: 0,\n    zoom: 0\n  });\n  var nw = viewport.project([west, north]);\n  var se = viewport.project([east, south]);\n  var size = [Math.abs(se[0] - nw[0]), Math.abs(se[1] - nw[1])];\n  var targetSize = [width - padding.left - padding.right - Math.abs(offset[0]) * 2, height - padding.top - padding.bottom - Math.abs(offset[1]) * 2];\n  assert(targetSize[0] > 0 && targetSize[1] > 0);\n  var scaleX = targetSize[0] / size[0];\n  var scaleY = targetSize[1] / size[1];\n  var offsetX = (padding.right - padding.left) / 2 / scaleX;\n  var offsetY = (padding.bottom - padding.top) / 2 / scaleY;\n  var center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n  var centerLngLat = viewport.unproject(center);\n  var zoom = viewport.zoom + Math.log2(Math.abs(Math.min(scaleX, scaleY)));\n  return {\n    longitude: centerLngLat[0],\n    latitude: centerLngLat[1],\n    zoom: zoom\n  };\n}\n//# sourceMappingURL=fit-bounds.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport Viewport from './viewport';\nimport { zoomToScale, pixelsToWorld, lngLatToWorld, worldToLngLat, getProjectionMatrix, getDistanceScales, getViewMatrix } from './web-mercator-utils';\nimport _fitBounds from './fit-bounds';\nimport * as vec2 from 'gl-matrix/vec2';\n\nvar WebMercatorViewport = function (_Viewport) {\n  _inherits(WebMercatorViewport, _Viewport);\n\n  function WebMercatorViewport() {\n    var _this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        width = _ref.width,\n        height = _ref.height,\n        _ref$latitude = _ref.latitude,\n        latitude = _ref$latitude === void 0 ? 0 : _ref$latitude,\n        _ref$longitude = _ref.longitude,\n        longitude = _ref$longitude === void 0 ? 0 : _ref$longitude,\n        _ref$zoom = _ref.zoom,\n        zoom = _ref$zoom === void 0 ? 0 : _ref$zoom,\n        _ref$pitch = _ref.pitch,\n        pitch = _ref$pitch === void 0 ? 0 : _ref$pitch,\n        _ref$bearing = _ref.bearing,\n        bearing = _ref$bearing === void 0 ? 0 : _ref$bearing,\n        _ref$altitude = _ref.altitude,\n        altitude = _ref$altitude === void 0 ? 1.5 : _ref$altitude,\n        nearZMultiplier = _ref.nearZMultiplier,\n        farZMultiplier = _ref.farZMultiplier;\n\n    _classCallCheck(this, WebMercatorViewport);\n\n    width = width || 1;\n    height = height || 1;\n    var scale = zoomToScale(zoom);\n    altitude = Math.max(0.75, altitude);\n    var center = lngLatToWorld([longitude, latitude], scale);\n    center[2] = 0;\n    var projectionMatrix = getProjectionMatrix({\n      width: width,\n      height: height,\n      pitch: pitch,\n      bearing: bearing,\n      altitude: altitude,\n      nearZMultiplier: nearZMultiplier || 1 / height,\n      farZMultiplier: farZMultiplier || 1.01\n    });\n    var viewMatrix = getViewMatrix({\n      height: height,\n      center: center,\n      pitch: pitch,\n      bearing: bearing,\n      altitude: altitude,\n      flipY: true\n    });\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WebMercatorViewport).call(this, {\n      width: width,\n      height: height,\n      viewMatrix: viewMatrix,\n      projectionMatrix: projectionMatrix\n    }));\n    _this.latitude = latitude;\n    _this.longitude = longitude;\n    _this.zoom = zoom;\n    _this.pitch = pitch;\n    _this.bearing = bearing;\n    _this.altitude = altitude;\n    _this.scale = scale;\n    _this.center = center;\n    _this.pixelsPerMeter = getDistanceScales(_assertThisInitialized(_assertThisInitialized(_this))).pixelsPerMeter[2];\n    Object.freeze(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(WebMercatorViewport, [{\n    key: \"projectFlat\",\n    value: function projectFlat(lngLat) {\n      var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.scale;\n      return lngLatToWorld(lngLat, scale);\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xy) {\n      var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.scale;\n      return worldToLngLat(xy, scale);\n    }\n  }, {\n    key: \"getMapCenterByLngLatPosition\",\n    value: function getMapCenterByLngLatPosition(_ref2) {\n      var lngLat = _ref2.lngLat,\n          pos = _ref2.pos;\n      var fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n      var toLocation = lngLatToWorld(lngLat, this.scale);\n      var translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n      var newCenter = vec2.add([], this.center, translate);\n      return worldToLngLat(newCenter, this.scale);\n    }\n  }, {\n    key: \"getLocationAtPoint\",\n    value: function getLocationAtPoint(_ref3) {\n      var lngLat = _ref3.lngLat,\n          pos = _ref3.pos;\n      return this.getMapCenterByLngLatPosition({\n        lngLat: lngLat,\n        pos: pos\n      });\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bounds) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var width = this.width,\n          height = this.height;\n\n      var _fitBounds2 = _fitBounds(Object.assign({\n        width: width,\n        height: height,\n        bounds: bounds\n      }, options)),\n          longitude = _fitBounds2.longitude,\n          latitude = _fitBounds2.latitude,\n          zoom = _fitBounds2.zoom;\n\n      return new WebMercatorViewport({\n        width: width,\n        height: height,\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      });\n    }\n  }]);\n\n  return WebMercatorViewport;\n}(Viewport);\n\nexport { WebMercatorViewport as default };\n//# sourceMappingURL=web-mercator-viewport.js.map","import{PureComponent as o}from\"react\";import e from\"prop-types\";import n from\"@mapbox/mapbox-gl-geocoder\";import{FlyToInterpolator as r}from\"react-map-gl\";import t from\"viewport-mercator-project\";import l from\"mapbox-gl\";var c=[\"top-left\",\"top-right\",\"bottom-left\",\"bottom-right\"],i=function(o){var e,i;function a(){for(var e,i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return(e=o.call.apply(o,[this].concat(a))||this).geocoder=null,e.cachedResult=null,e.initializeGeocoder=function(){var o=e.getMapboxMap(),r=e.getContainerNode(),t=e.props,i=t.inputValue,a=t.render,u=t.getItemValue,s=t.onInit,d=t.position,p={accessToken:t.mapboxApiAccessToken,origin:t.origin,zoom:t.zoom,flyTo:!1,placeholder:t.placeholder,proximity:t.proximity,trackProximity:t.trackProximity,collapsed:t.collapsed,clearAndBlurOnEsc:t.clearAndBlurOnEsc,clearOnBlur:t.clearOnBlur,bbox:t.bbox,types:t.types,countries:t.countries,minLength:t.minLength,limit:t.limit,language:t.language,filter:t.filter,localGeocoder:t.localGeocoder,localGeocoderOnly:t.localGeocoderOnly,reverseGeocode:t.reverseGeocode,enableEventLogging:t.enableEventLogging,marker:t.marker,mapboxgl:l};a&&\"function\"==typeof a&&(p.render=a),u&&\"function\"==typeof u&&(p.getItemValue=u),e.geocoder=new n(p),e.subscribeEvents(),r?r.appendChild(e.geocoder.onAdd(o)):o.addControl(e.geocoder,c.find(function(o){return d===o})),null!=i?e.geocoder.setInput(i):e.cachedResult&&e.geocoder.setInput(e.cachedResult.place_name),(e.cachedResult||null!=i)&&e.showClearIcon(),s(e.geocoder)},e.showClearIcon=function(){e.geocoder._clearEl.style.display=\"block\"},e.getMapboxMap=function(){var o=e.props.mapRef;return o&&o.current&&o.current.getMap()||null},e.getContainerNode=function(){var o=e.props.containerRef;return o&&o.current||null},e.subscribeEvents=function(){e.geocoder.on(\"clear\",e.handleClear),e.geocoder.on(\"loading\",e.handleLoading),e.geocoder.on(\"results\",e.handleResults),e.geocoder.on(\"result\",e.handleResult),e.geocoder.on(\"error\",e.handleError)},e.unsubscribeEvents=function(){e.geocoder.off(\"clear\",e.handleClear),e.geocoder.off(\"loading\",e.handleLoading),e.geocoder.off(\"results\",e.handleResults),e.geocoder.off(\"result\",e.handleResult),e.geocoder.off(\"error\",e.handleError)},e.removeGeocoder=function(){var o=e.getMapboxMap();e.unsubscribeEvents(),o&&o.removeControl&&e.getMapboxMap().removeControl(e.geocoder),e.geocoder=null},e.handleClear=function(){e.cachedResult=null,e.props.onClear()},e.handleLoading=function(o){e.props.onLoading(o)},e.handleResults=function(o){e.props.onResults(o)},e.handleResult=function(o){var n=o.result,l=e.props,c=l.onViewportChange,i=l.onResult,a=n.bbox,u=n.center,s=n.properties,d=(void 0===s?{}:s).short_code,p=u[0],g=u[1],f={fr:{name:\"France\",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:\"United States\",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:\"Russia\",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:\"Canada\",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},m=e.getMapboxMap().getContainer().getBoundingClientRect(),b=m.width,h=m.height,y=e.geocoder.options.zoom,x=function(o,e){return new t(e).fitBounds(o)};try{!f[d]&&a?y=x([[a[0],a[1]],[a[2],a[3]]],{width:b,height:h}).zoom:f[d]&&(y=x(f[d].bbox,{width:b,height:h}).zoom)}catch(o){console.warn(\"following result caused an error when trying to zoom to bbox: \",n),y=e.geocoder.options.zoom}c({longitude:p,latitude:g,zoom:y,transitionInterpolator:new r,transitionDuration:3e3}),i(o),e.cachedResult=n,e.geocoder._typeahead.selected=null,e.showClearIcon()},e.handleError=function(o){e.props.onError(o)},e}i=o,(e=a).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var u=a.prototype;return u.componentDidMount=function(){this.initializeGeocoder()},u.componentWillUnmount=function(){this.removeGeocoder()},u.componentDidUpdate=function(){this.removeGeocoder(),this.initializeGeocoder()},u.getGeocoder=function(){return this.geocoder},u.render=function(){return null},a}(o);i.propTypes={mapRef:e.object.isRequired,containerRef:e.object,onViewportChange:e.func,mapboxApiAccessToken:e.string.isRequired,inputValue:e.string,origin:e.string,zoom:e.number,placeholder:e.string,proximity:e.object,trackProximity:e.bool,collapsed:e.bool,clearAndBlurOnEsc:e.bool,clearOnBlur:e.bool,bbox:e.array,types:e.string,countries:e.string,minLength:e.number,limit:e.number,language:e.string,filter:e.func,localGeocoder:e.func,localGeocoderOnly:e.bool,reverseGeocode:e.bool,enableEventLogging:e.bool,marker:e.oneOfType([e.bool,e.object]),render:e.func,getItemValue:e.func,position:e.oneOf(c),onInit:e.func,onClear:e.func,onLoading:e.func,onResults:e.func,onResult:e.func,onError:e.func},i.defaultProps={onViewportChange:function(){},origin:\"https://api.mapbox.com\",zoom:16,placeholder:\"Search\",trackProximity:!1,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,minLength:2,limit:5,reverseGeocode:!1,enableEventLogging:!0,marker:!0,position:\"top-right\",onInit:function(){},onClear:function(){},onLoading:function(){},onResults:function(){},onResult:function(){},onError:function(){}};export default i;\n//# sourceMappingURL=index.m.js.map\n","'use strict';\nvar nanoid = require('nanoid')\n\n/**\n * Construct a new mapbox event client to send interaction events to the mapbox event service\n * @param {Object} options options with which to create the service\n * @param {String} options.accessToken the mapbox access token to make requests\n * @param {Number} [options.flushInterval=1000] the number of ms after which to flush the event queue\n * @param {Number} [options.maxQueueSize=100] the number of events to queue before flushing\n * @private\n */\nfunction MapboxEventManager(options) {\n  this.origin = options.origin || 'https://api.mapbox.com';\n  this.endpoint = 'events/v2';\n  this.access_token = options.accessToken;\n  this.version = '0.2.0'\n  this.sessionID = this.generateSessionID();\n  this.userAgent = this.getUserAgent();\n\n  this.options = options;\n  this.send = this.send.bind(this);\n\n\n  // parse global options to be sent with each request\n  this.countries = (options.countries) ? options.countries.split(\",\") : null;\n  this.types = (options.types) ? options.types.split(\",\") : null;\n  this.bbox = (options.bbox) ? options.bbox : null;\n  this.language = (options.language) ? options.language.split(\",\") : null;\n  this.limit = (options.limit) ? +options.limit : null;\n  this.locale = navigator.language || null;\n  this.enableEventLogging = this.shouldEnableLogging(options);\n  this.eventQueue = new Array();\n  this.flushInterval = options.flushInterval || 1000;\n  this.maxQueueSize = options.maxQueueSize || 100;\n  this.timer = (this.flushInterval) ? setTimeout(this.flush.bind(this), this.flushInterval) : null;\n  // keep some state to deduplicate requests if necessary\n  this.lastSentInput = \"\";\n  this.lastSentIndex = 0;\n}\n\nMapboxEventManager.prototype = {\n  /**\n     * Send a search.select event to the mapbox events service\n     * This event marks the array index of the item selected by the user out of the array of possible options\n     * @private\n     * @param {Object} selected the geojson feature selected by the user\n     * @param {Object} geocoder a mapbox-gl-geocoder instance\n     * @returns {Promise}\n     */\n  select: function(selected, geocoder){\n    var resultIndex = this.getSelectedIndex(selected, geocoder);\n    var payload = this.getEventPayload('search.select', geocoder);\n    payload.resultIndex = resultIndex;\n    payload.resultPlaceName  = selected.place_name;\n    payload.resultId = selected.id;\n    if ((resultIndex === this.lastSentIndex && payload.queryString === this.lastSentInput) || resultIndex == -1) {\n      // don't log duplicate events if the user re-selected the same feature on the same search\n      return;\n    }\n    this.lastSentIndex = resultIndex;\n    this.lastSentInput = payload.queryString;\n    if (!payload.queryString) return; // will be rejected\n    return this.push(payload)\n  },\n\n  /**\n     * Send a search-start event to the mapbox events service\n     * This turnstile event marks when a user starts a new search\n     * @private\n     * @param {Object} geocoder a mapbox-gl-geocoder instance\n     * @returns {Promise}\n     */\n  start: function(geocoder){\n    var payload = this.getEventPayload('search.start', geocoder);\n    if (!payload.queryString) return; // will be rejected\n    return this.push(payload);\n  },\n\n  /**\n   * Send a search-keyevent event to the mapbox events service\n   * This event records each keypress in sequence\n   * @private\n   * @param {Object} keyEvent the keydown event to log\n   * @param {Object} geocoder a mapbox-gl-geocoder instance\n   * \n   */\n  keyevent: function(keyEvent, geocoder){\n\n    //pass invalid event\n    if (!keyEvent.key) return;\n    // don't send events for keys that don't change the input\n    // TAB, ESC, LEFT, RIGHT, ENTER, UP, DOWN\n    if (keyEvent.metaKey || [9, 27, 37, 39, 13, 38, 40].indexOf(keyEvent.keyCode) !== -1) return;\n    var payload = this.getEventPayload('search.keystroke', geocoder);\n    payload.lastAction = keyEvent.key;\n    if (!payload.queryString) return; // will be rejected\n    return this.push(payload);\n  },\n\n  /**\n   * Send an event to the events service\n   *\n   * The event is skipped if the instance is not enabled to send logging events\n   *\n   * @private\n   * @param {Object} payload the http POST body of the event\n   * @param {Function} [callback] a callback function to invoke when the send has completed\n   * @returns {Promise}\n   */\n  send: function (payload, callback) {\n    if (!this.enableEventLogging) {\n      if (callback) return callback();\n      return;\n    }\n    var options = this.getRequestOptions(payload);\n    this.request(options, function(err){\n      if (err) return this.handleError(err, callback);\n      if (callback) {\n        return callback();\n      }\n    }.bind(this))\n  },\n  /**\n   * Get http request options\n   * @private\n   * @param {*} payload\n   */\n  getRequestOptions: function(payload){\n    if (!Array.isArray(payload)) payload = [payload];\n    var options = {\n      // events must be sent with POST\n      method: \"POST\",\n      host: this.origin,\n      path: this.endpoint +  \"?access_token=\" + this.access_token,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body:JSON.stringify(payload) //events are arrays\n    }\n    return options\n  },\n\n  /**\n   * Get the event payload to send to the events service\n   * Most payload properties are shared across all events\n   * @private\n   * @param {String} event the name of the event to send to the events service. Valid options are 'search.start', 'search.select', 'search.feedback'.\n   * @param {Object} geocoder a mapbox-gl-geocoder instance\n   * @returns {Object} an event payload\n   */\n  getEventPayload: function (event, geocoder) {\n    var proximity;\n    if (!geocoder.options.proximity) proximity = null;\n    else proximity = [geocoder.options.proximity.longitude, geocoder.options.proximity.latitude];\n\n    var zoom = (geocoder._map) ? geocoder._map.getZoom() : undefined;\n    var payload = {\n      event: event,\n      created: +new Date(),\n      sessionIdentifier: this.sessionID,\n      country: this.countries,\n      userAgent: this.userAgent,\n      language: this.language,\n      bbox: this.bbox,\n      types: this.types,\n      endpoint: 'mapbox.places',\n      // fuzzyMatch: search.fuzzy, //todo  --> add to plugin\n      proximity: proximity,\n      limit: geocoder.options.limit,\n      // routing: search.routing, //todo --> add to plugin\n      mapZoom: zoom,\n      keyboardLocale: this.locale\n    }\n\n    // get the text in the search bar\n    if (event === \"search.select\"){\n      payload.queryString = geocoder.inputString;\n    }else if (event != \"search.select\" && geocoder._inputEl){\n      payload.queryString = geocoder._inputEl.value;\n    }else{\n      payload.queryString = geocoder.inputString;\n    }\n    return payload;\n  },\n\n  /**\n   * Wraps the request function for easier testing\n   * Make an http request and invoke a callback\n   * @private\n   * @param {Object} opts options describing the http request to be made\n   * @param {Function} callback the callback to invoke when the http request is completed\n   */\n  request: function (opts, callback) {\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n      if (this.readyState == 4 ) {\n        if (this.status == 204){\n          //success\n          return callback(null);\n        }else {\n          return callback(this.statusText);\n        }\n      }\n    };\n\n    xhttp.open(opts.method, opts.host + '/' + opts.path, true);\n    for (var header in opts.headers){\n      var headerValue = opts.headers[header];\n      xhttp.setRequestHeader(header, headerValue)\n    }\n    xhttp.send(opts.body);\n  },\n\n  /**\n   * Handle an error that occurred while making a request\n   * @param {Object} err an error instance to log\n   * @private\n   */\n  handleError: function (err, callback) {\n    if (callback) return callback(err);\n  },\n\n  /**\n   * Generate a session ID to be returned with all of the searches made by this geocoder instance\n   * ID is random and cannot be tracked across sessions\n   * @private\n   */\n  generateSessionID: function () {\n    return nanoid();\n  },\n\n  /**\n   * Get a user agent string to send with the request to the events service\n   * @private\n   */\n  getUserAgent: function () {\n    return 'mapbox-gl-geocoder.' + this.version + \".\" + navigator.userAgent;\n  },\n\n  /**\n     * Get the 0-based numeric index of the item that the user selected out of the list of options\n     * @private\n     * @param {Object} selected the geojson feature selected by the user\n     * @param {Object} geocoder a Mapbox-GL-Geocoder instance\n     * @returns {Number} the index of the selected result\n     */\n  getSelectedIndex: function(selected, geocoder){\n    if (!geocoder._typeahead) return;\n    var results = geocoder._typeahead.data;\n    var selectedID = selected.id;\n    var resultIDs = results.map(function (feature) {\n      return feature.id;\n    });\n    var selectedIdx = resultIDs.indexOf(selectedID);\n    return selectedIdx;\n  },\n\n  /**\n     * Check whether events should be logged\n     * Clients using a localGeocoder or an origin other than mapbox should not have events logged\n     * @private\n     */\n  shouldEnableLogging: function(options){\n    if (options.enableEventLogging === false) return false;\n    if (options.origin && options.origin.indexOf('api.mapbox.com') == -1) return false;\n    // hard to make sense of events when a local instance is suplementing results from origin\n    if (options.localGeocoder) return false;\n    // hard to make sense of events when a custom filter is in use\n    if (options.filter) return false;\n    return true;\n  },\n\n  /**\n   * Flush out the event queue by sending events to the events service\n   * @private\n   */\n  flush: function(){\n    if (this.eventQueue.length > 0){\n      this.send(this.eventQueue);\n      this.eventQueue = new Array();\n    }\n    // //reset the timer\n    if (this.timer)  clearTimeout(this.timer);\n    if (this.flushInterval) this.timer = setTimeout(this.flush.bind(this), this.flushInterval)\n  },\n\n  /**\n   * Push event into the pending queue\n   * @param {Object} evt the event to send to the events service\n   * @param {Boolean} forceFlush indicates that the event queue should be flushed after adding this event regardless of size of the queue\n   * @private\n   */\n  push: function(evt, forceFlush){\n    this.eventQueue.push(evt);\n    if (this.eventQueue.length >= this.maxQueueSize || forceFlush){\n      this.flush();\n    }\n  },\n\n  /**\n   * Flush any remaining events from the queue before it is removed\n   * @private\n   */\n  remove: function(){\n    this.flush();\n  }\n}\n\n\n\nmodule.exports = MapboxEventManager;\n","module.exports = {\n  'fr': {\n    'name': 'France',\n    'bbox': [[-4.59235, 41.380007], [9.560016, 51.148506]]\n  },\n  'us': {\n    'name': 'United States',\n    'bbox': [[-171.791111, 18.91619], [-66.96466, 71.357764]]\n  },\n  'ru': {\n    'name': 'Russia',\n    'bbox': [[19.66064, 41.151416], [190.10042, 81.2504]]\n  },\n  'ca': {\n    'name': 'Canada',\n    'bbox': [[-140.99778, 41.675105], [-52.648099, 83.23324]]\n  }\n};\n","'use strict';\n\nvar Typeahead = require('suggestions');\nvar debounce = require('lodash.debounce');\nvar extend = require('xtend');\nvar EventEmitter = require('events').EventEmitter;\nvar exceptions = require('./exceptions');\nvar MapboxClient = require('@mapbox/mapbox-sdk');\nvar mbxGeocoder = require('@mapbox/mapbox-sdk/services/geocoding');\nvar MapboxEventManager = require('./events');\nvar localization = require('./localization');\nvar subtag = require('subtag');\n\n/**\n * A geocoder component using the [Mapbox Geocoding API](https://docs.mapbox.com/api/search/#geocoding)\n * @class MapboxGeocoder\n * @param {Object} options\n * @param {String} options.accessToken Required.\n * @param {String} [options.origin=https://api.mapbox.com] Use to set a custom API origin.\n * @param {Object} [options.mapboxgl] A [mapbox-gl](https://github.com/mapbox/mapbox-gl-js) instance to use when creating [Markers](https://docs.mapbox.com/mapbox-gl-js/api/#marker). Required if `options.marker` is `true`.\n * @param {Number} [options.zoom=16] On geocoded result what zoom level should the map animate to when a `bbox` isn't found in the response. If a `bbox` is found the map will fit to the `bbox`.\n * @param {Boolean|Object} [options.flyTo=true] If `false`, animating the map to a selected result is disabled. If `true`, animating the map will use the default animation parameters. If an object, it will be passed as `options` to the map [`flyTo`](https://docs.mapbox.com/mapbox-gl-js/api/#map#flyto) or [`fitBounds`](https://docs.mapbox.com/mapbox-gl-js/api/#map#fitbounds) method providing control over the animation of the transition.\n * @param {String} [options.placeholder=Search] Override the default placeholder attribute value.\n * @param {Object} [options.proximity] a proximity argument: this is\n * a geographical point given as an object with `latitude` and `longitude`\n * properties. Search results closer to this point will be given\n * higher priority.\n * @param {Boolean} [options.trackProximity=true] If `true`, the geocoder proximity will automatically update based on the map view.\n * @param {Boolean} [options.collapsed=false] If `true`, the geocoder control will collapse until hovered or in focus.\n * @param {Boolean} [options.clearAndBlurOnEsc=false] If `true`, the geocoder control will clear it's contents and blur when user presses the escape key.\n * @param {Boolean} [options.clearOnBlur=false] If `true`, the geocoder control will clear its value when the input blurs.\n * @param {Array} [options.bbox] a bounding box argument: this is\n * a bounding box given as an array in the format `[minX, minY, maxX, maxY]`.\n * Search results will be limited to the bounding box.\n * @param {string} [options.countries] a comma separated list of country codes to\n * limit results to specified country or countries.\n * @param {string} [options.types] a comma seperated list of types that filter\n * results to match those specified. See https://docs.mapbox.com/api/search/#data-types\n * for available types.\n * If reverseGeocode is enabled, you should specify one type. If you configure more than one type, the first type will be used.\n * @param {Number} [options.minLength=2] Minimum number of characters to enter before results are shown.\n * @param {Number} [options.limit=5] Maximum number of results to show.\n * @param {string} [options.language] Specify the language to use for response text and query result weighting. Options are IETF language tags comprised of a mandatory ISO 639-1 language code and optionally one or more IETF subtags for country or script. More than one value can also be specified, separated by commas. Defaults to the browser's language settings.\n * @param {Function} [options.filter] A function which accepts a Feature in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format to filter out results from the Geocoding API response before they are included in the suggestions list. Return `true` to keep the item, `false` otherwise.\n * @param {Function} [options.localGeocoder] A function accepting the query string which performs local geocoding to supplement results from the Mapbox Geocoding API. Expected to return an Array of GeoJSON Features in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format.\n * @param {Function} [options.externalGeocoder] A function accepting the query string and current features list which performs geocoding to supplement results from the Mapbox Geocoding API. Expected to return a Promise which resolves to an Array of GeoJSON Features in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format.\n * @param {distance|score} [options.reverseMode=distance] - Set the factors that are used to sort nearby results.\n * @param {boolean} [options.reverseGeocode=false] If `true`, enable reverse geocoding mode. In reverse geocoding, search input is expected to be coordinates in the form `lat, lon`, with suggestions being the reverse geocodes.\n * @param {Boolean} [options.enableEventLogging=true] Allow Mapbox to collect anonymous usage statistics from the plugin.\n * @param {Boolean|Object} [options.marker=true]  If `true`, a [Marker](https://docs.mapbox.com/mapbox-gl-js/api/#marker) will be added to the map at the location of the user-selected result using a default set of Marker options.  If the value is an object, the marker will be constructed using these options. If `false`, no marker will be added to the map. Requires that `options.mapboxgl` also be set.\n * @param {Function} [options.render] A function that specifies how the results should be rendered in the dropdown menu. This function should accepts a single [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) object as input and return a string. Any HTML in the returned string will be rendered.\n * @param {Function} [options.getItemValue] A function that specifies how the selected result should be rendered in the search bar. This function should accept a single [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) object as input and return a string. HTML tags in the output string will not be rendered. Defaults to `(item) => item.place_name`.\n * @param {String} [options.mode=mapbox.places] A string specifying the geocoding [endpoint](https://docs.mapbox.com/api/search/#endpoints) to query. Options are `mapbox.places` and `mapbox.places-permanent`. The `mapbox.places-permanent` mode requires an enterprise license for permanent geocodes.\n * @param {Boolean} [options.localGeocoderOnly=false] If `true`, indicates that the `localGeocoder` results should be the only ones returned to the user. If `false`, indicates that the `localGeocoder` results should be combined with those from the Mapbox API with the `localGeocoder` results ranked higher.\n * @example\n * var geocoder = new MapboxGeocoder({ accessToken: mapboxgl.accessToken });\n * map.addControl(geocoder);\n * @return {MapboxGeocoder} `this`\n *\n */\n\nfunction MapboxGeocoder(options) {\n  this._eventEmitter = new EventEmitter();\n  this.options = extend({}, this.options, options);\n  this.inputString = '';\n  this.fresh = true;\n  this.lastSelected = null;\n}\n\nMapboxGeocoder.prototype = {\n  options: {\n    zoom: 16,\n    flyTo: true,\n    trackProximity: true,\n    minLength: 2,\n    reverseGeocode: false,\n    limit: 5,\n    origin: 'https://api.mapbox.com',\n    enableEventLogging: true,\n    marker: true,\n    mapboxgl: null,\n    collapsed: false,\n    clearAndBlurOnEsc: false,\n    clearOnBlur: false,\n    getItemValue: function(item) {\n      return item.place_name\n    },\n    render: function(item) {\n      var placeName = item.place_name.split(',');\n      return '<div class=\"mapboxgl-ctrl-geocoder--suggestion\"><div class=\"mapboxgl-ctrl-geocoder--suggestion-title\">' + placeName[0]+ '</div><div class=\"mapboxgl-ctrl-geocoder--suggestion-address\">' + placeName.splice(1, placeName.length).join(',') + '</div></div>';\n    }\n  },\n\n  /**\n   * Add the geocoder to a container. The container can be either a `mapboxgl.Map`, an `HTMLElement` or a CSS selector string.\n   *\n   * If the container is a [`mapboxgl.Map`](https://docs.mapbox.com/mapbox-gl-js/api/map/), this function will behave identically to [`Map.addControl(geocoder)`](https://docs.mapbox.com/mapbox-gl-js/api/map/#map#addcontrol).\n   * If the container is an instance of [`HTMLElement`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement), then the geocoder will be appended as a child of that [`HTMLElement`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement).\n   * If the container is a [CSS selector string](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors), the geocoder will be appended to the element returned from the query.\n   *\n   * This function will throw an error if the container is none of the above.\n   * It will also throw an error if the referenced HTML element cannot be found in the `document.body`.\n   *\n   * For example, if the HTML body contains the element `<div id='geocoder-container'></div>`, the following script will append the geocoder to `#geocoder-container`:\n   *\n   * ```javascript\n   * var geocoder = new MapboxGeocoder({ accessToken: mapboxgl.accessToken });\n   * geocoder.addTo('#geocoder-container');\n   * ```\n   * @param {String|HTMLElement|mapboxgl.Map} container A reference to the container to which to add the geocoder\n   */\n  addTo: function(container){\n\n    function addToExistingContainer (geocoder, container) {\n      if (!document.body.contains(container)) {\n        throw new Error(\"Element provided to #addTo() exists, but is not in the DOM\")\n      }\n      const el = geocoder.onAdd(); //returns the input elements, which are then added to the requested html container\n      container.appendChild(el);\n    }\n\n    // if the container is a map, add the control like normal\n    if (container._controlContainer){\n      //  it's a mapbox-gl map, add like normal\n      container.addControl(this);\n    }\n    // if the container is an HTMLElement, then set the parent to be that element\n    else if (container instanceof HTMLElement) {\n      addToExistingContainer(this, container);\n    }\n    // if the container is a string, treat it as a CSS query\n    else if (typeof container == 'string'){\n      const parent = document.querySelectorAll(container);\n      if (parent.length === 0){\n        throw new Error(\"Element \", container, \"not found.\")\n      }\n\n      if (parent.length > 1){\n        throw new Error(\"Geocoder can only be added to a single html element\")\n      }\n\n      addToExistingContainer(this, parent[0]);\n    }else{\n      throw new Error(\"Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element\")\n    }\n  },\n\n  onAdd: function(map) {\n    if (map && typeof map != 'string'){\n      this._map = map;\n    }\n\n    this.setLanguage();\n\n    if (!this.options.localGeocoderOnly){\n      this.geocoderService = mbxGeocoder(\n        MapboxClient({\n          accessToken: this.options.accessToken,\n          origin: this.options.origin\n        })\n      );\n    }\n\n    if (this.options.localGeocoderOnly && !this.options.localGeocoder){\n      throw new Error(\"A localGeocoder function must be specified to use localGeocoderOnly mode\")\n    }\n\n    this.eventManager = new MapboxEventManager(this.options);\n\n    this._onChange = this._onChange.bind(this);\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._onPaste = this._onPaste.bind(this);\n    this._onBlur = this._onBlur.bind(this);\n    this._showButton = this._showButton.bind(this);\n    this._hideButton = this._hideButton.bind(this);\n    this._onQueryResult = this._onQueryResult.bind(this);\n    this.clear = this.clear.bind(this);\n    this._updateProximity = this._updateProximity.bind(this);\n    this._collapse = this._collapse.bind(this);\n    this._unCollapse = this._unCollapse.bind(this);\n    this._clear = this._clear.bind(this);\n    this._clearOnBlur = this._clearOnBlur.bind(this);\n\n    var el = (this.container = document.createElement('div'));\n    el.className = 'mapboxgl-ctrl-geocoder mapboxgl-ctrl';\n\n    var searchIcon = this.createIcon('search', '<path d=\"M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z\"/>')\n\n    this._inputEl = document.createElement('input');\n    this._inputEl.type = 'text';\n    this._inputEl.className = 'mapboxgl-ctrl-geocoder--input';\n\n    this.setPlaceholder();\n\n    if (this.options.collapsed) {\n      this._collapse();\n      this.container.addEventListener('mouseenter', this._unCollapse);\n      this.container.addEventListener('mouseleave', this._collapse);\n      this._inputEl.addEventListener('focus', this._unCollapse);\n    }\n\n    if (this.options.collapsed || this.options.clearOnBlur) {\n      this._inputEl.addEventListener('blur', this._onBlur);\n    }\n\n    this._inputEl.addEventListener('keydown', debounce(this._onKeyDown, 200));\n    this._inputEl.addEventListener('paste', this._onPaste);\n    this._inputEl.addEventListener('change', this._onChange);\n    this.container.addEventListener('mouseenter', this._showButton);\n    this.container.addEventListener('mouseleave', this._hideButton);\n    this._inputEl.addEventListener('keyup', function(e){\n      this.eventManager.keyevent(e, this);\n    }.bind(this));\n\n    var actions = document.createElement('div');\n    actions.classList.add('mapboxgl-ctrl-geocoder--pin-right');\n\n    this._clearEl = document.createElement('button');\n    this._clearEl.setAttribute('aria-label', 'Clear');\n    this._clearEl.addEventListener('click', this.clear);\n    this._clearEl.className = 'mapboxgl-ctrl-geocoder--button';\n\n    var buttonIcon = this.createIcon('close', '<path d=\"M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z\"/>')\n    this._clearEl.appendChild(buttonIcon);\n\n    this._loadingEl = this.createIcon('loading', '<path fill=\"#333\" d=\"M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z\"/><path opacity=\".1\" d=\"M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z\"/>');\n\n    actions.appendChild(this._clearEl);\n    actions.appendChild(this._loadingEl);\n\n    el.appendChild(searchIcon);\n    el.appendChild(this._inputEl);\n    el.appendChild(actions);\n\n    this._typeahead = new Typeahead(this._inputEl, [], {\n      filter: false,\n      minLength: this.options.minLength,\n      limit: this.options.limit\n    });\n\n    this.setRenderFunction(this.options.render);\n    this._typeahead.getItemValue = this.options.getItemValue;\n\n    this.mapMarker = null;\n    this._handleMarker = this._handleMarker.bind(this);\n    if (this._map){\n      if (this.options.trackProximity ) {\n        this._updateProximity();\n        this._map.on('moveend', this._updateProximity);\n      }\n      this._mapboxgl = this.options.mapboxgl;\n      if (!this._mapboxgl && this.options.marker) {\n        // eslint-disable-next-line no-console\n        console.error(\"No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl.\");\n        this.options.marker = false;\n      }\n    }\n    return el;\n  },\n\n  createIcon: function(name, path) {\n    var icon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    icon.setAttribute('class', 'mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-' + name);\n    icon.setAttribute('viewBox', '0 0 18 18');\n    icon.setAttribute('xml:space','preserve');\n    icon.setAttribute('width', 18);\n    icon.setAttribute('height', 18);\n    // IE does not have innerHTML for SVG nodes\n    if (!('innerHTML' in icon)) {\n      var SVGNodeContainer = document.createElement('div');\n      SVGNodeContainer.innerHTML = '<svg>' + path.valueOf().toString() + '</svg>';\n      var SVGNode = SVGNodeContainer.firstChild,\n        SVGPath = SVGNode.firstChild;\n      icon.appendChild(SVGPath);\n    } else {\n      icon.innerHTML = path;\n    }\n    return icon;\n  },\n\n  onRemove: function() {\n    this.container.parentNode.removeChild(this.container);\n\n    if (this.options.trackProximity && this._map) {\n      this._map.off('moveend', this._updateProximity);\n    }\n\n    this._removeMarker();\n\n    this._map = null;\n\n    return this;\n  },\n\n  _onPaste: function(e){\n    var value = (e.clipboardData || window.clipboardData).getData('text');\n    if (value.length >= this.options.minLength) {\n      this._geocode(value);\n    }\n  },\n\n  _onKeyDown: function(e) {\n    var ESC_KEY_CODE = 27,\n      TAB_KEY_CODE = 9;\n\n    if (e.keyCode === ESC_KEY_CODE && this.options.clearAndBlurOnEsc) {\n      this._clear(e);\n      return this._inputEl.blur();\n    }\n\n    // if target has shadowRoot, then get the actual active element inside the shadowRoot\n    var target = e.target && e.target.shadowRoot\n      ? e.target.shadowRoot.activeElement\n      : e.target;\n    var value = target ? target.value : '';\n\n    if (!value) {\n      this.fresh = true;\n      // the user has removed all the text\n      if (e.keyCode !== TAB_KEY_CODE) this.clear(e);\n      return (this._clearEl.style.display = 'none');\n    }\n\n    // TAB, ESC, LEFT, RIGHT, ENTER, UP, DOWN\n    if ((e.metaKey || [TAB_KEY_CODE, ESC_KEY_CODE, 37, 39, 13, 38, 40].indexOf(e.keyCode) !== -1))\n      return;\n\n    if (target.value.length >= this.options.minLength) {\n      this._geocode(target.value);\n    }\n  },\n\n  _showButton: function() {\n    if (this._typeahead.selected) this._clearEl.style.display = 'block';\n  },\n\n  _hideButton: function() {\n    if (this._typeahead.selected) this._clearEl.style.display = 'none';\n  },\n\n  _onBlur: function(e) {\n    if (this.options.clearOnBlur) {\n      this._clearOnBlur(e);\n    }\n    if (this.options.collapsed) {\n      this._collapse();\n    }\n  },\n  _onChange: function() {\n    var selected = this._typeahead.selected;\n    if (selected  && JSON.stringify(selected) !== this.lastSelected) {\n      this._clearEl.style.display = 'none';\n      if (this.options.flyTo) {\n        var flyOptions;\n        if (selected.properties && exceptions[selected.properties.short_code]) {\n          // Certain geocoder search results return (and therefore zoom to fit)\n          // an unexpectedly large bounding box: for example, both Russia and the\n          // USA span both sides of -180/180, or France includes the island of\n          // Reunion in the Indian Ocean. An incomplete list of these exceptions\n          // at ./exceptions.json provides \"reasonable\" bounding boxes as a\n          // short-term solution; this may be amended as necessary.\n          flyOptions = extend({}, this.options.flyTo);\n          if (this._map){\n            this._map.fitBounds(exceptions[selected.properties.short_code].bbox, flyOptions);\n          }\n        } else if (selected.bbox) {\n          var bbox = selected.bbox;\n          flyOptions = extend({}, this.options.flyTo);\n          if (this._map){\n            this._map.fitBounds([[bbox[0], bbox[1]], [bbox[2], bbox[3]]], flyOptions);\n          }\n        } else {\n          var defaultFlyOptions = {\n            zoom: this.options.zoom\n          }\n          flyOptions = extend({}, defaultFlyOptions, this.options.flyTo);\n          //  ensure that center is not overriden by custom options\n          flyOptions.center = selected.center;\n          if (this._map){\n            this._map.flyTo(flyOptions);\n          }\n        }\n      }\n      if (this.options.marker && this._mapboxgl){\n        this._handleMarker(selected);\n      }\n\n      // After selecting a feature, re-focus the textarea and set\n      // cursor at start.\n      this._inputEl.focus();\n      this._inputEl.scrollLeft = 0;\n      this._inputEl.setSelectionRange(0, 0);\n      this.lastSelected = JSON.stringify(selected);\n      this._eventEmitter.emit('result', { result: selected });\n      this.eventManager.select(selected, this);\n    }\n  },\n\n  _geocode: function(searchInput) {\n    this._loadingEl.style.display = 'block';\n    this._eventEmitter.emit('loading', { query: searchInput });\n    this.inputString = searchInput;\n    // Possible config proprerties to pass to client\n    var keys = [\n      'bbox',\n      'limit',\n      'proximity',\n      'countries',\n      'types',\n      'language',\n      'reverseMode',\n      'mode'\n    ];\n    var self = this;\n    var geocoderError = null;\n    // Create config object\n    var config = keys.reduce(function(config, key) {\n      if (self.options[key]) {\n        // countries, types, and language need to be passed in as arrays to client\n        // https://github.com/mapbox/mapbox-sdk-js/blob/master/services/geocoding.js#L38-L47\n        ['countries', 'types', 'language'].indexOf(key) > -1\n          ? (config[key] = self.options[key].split(/[\\s,]+/))\n          : (config[key] = self.options[key]);\n\n        if (key === 'proximity' && self.options[key] && typeof self.options[key].longitude === 'number' && typeof self.options[key].latitude === 'number') {\n          config[key] = [self.options[key].longitude, self.options[key].latitude]\n        }\n      }\n      return config;\n    }, {});\n\n    var request;\n    if (this.options.localGeocoderOnly){\n      request = Promise.resolve();\n    }\n    // check if searchInput resembles coordinates, and if it does,\n    // make the request a reverseGeocode\n    else if (\n      this.options.reverseGeocode &&\n      /(-?\\d+\\.?\\d*)[, ]+(-?\\d+\\.?\\d*)[ ]*$/.test(searchInput)\n    ) {\n      // parse coordinates\n      var coords = searchInput.split(/[\\s(,)?]+/).map(function(c) {\n        return parseFloat(c, 10);\n      }).reverse();\n\n      // client only accepts one type for reverseGeocode, so\n      // use first config type if one, if not default to poi\n      config.types ? [config.types[0]] : [\"poi\"];\n      config = extend(config, { query: coords, limit: 1 });\n\n      // drop proximity which may have been set by trackProximity since it's not supported by the reverseGeocoder\n      if ('proximity' in config) {\n        delete config.proximity;\n      }\n\n      request = this.geocoderService.reverseGeocode(config).send();\n    } else {\n      config = extend(config, { query: searchInput });\n      request = this.geocoderService.forwardGeocode(config).send();\n    }\n\n    var localGeocoderRes = [];\n    if (this.options.localGeocoder) {\n      localGeocoderRes = this.options.localGeocoder(searchInput);\n      if (!localGeocoderRes) {\n        localGeocoderRes = [];\n      }\n    }\n    var externalGeocoderRes = [];\n\n    request.catch(function(error){\n      geocoderError = error;\n    }.bind(this)) \n      .then(\n        function(response) {\n          this._loadingEl.style.display = 'none';\n\n          var res = {};\n\n          if (!response){\n            res = {\n              type: 'FeatureCollection',\n              features: []\n            }\n          } else if (response.statusCode == '200') {\n            res = response.body;\n            res.request = response.request\n            res.headers = response.headers\n          }\n\n          res.config = config;\n\n          if (this.fresh){\n            this.eventManager.start(this);\n            this.fresh = false;\n          }\n\n          // supplement Mapbox Geocoding API results with locally populated results\n          res.features = res.features\n            ? localGeocoderRes.concat(res.features)\n            : localGeocoderRes;\n\n          if (this.options.externalGeocoder) {\n\n            externalGeocoderRes = this.options.externalGeocoder(searchInput, res.features) || [];\n            // supplement Mapbox Geocoding API results with features returned by a promise\n            return externalGeocoderRes.then(function(features) {\n              res.features = res.features ? features.concat(res.features) : features;\n              return res;\n            }, function(){\n              // on error, display the original result\n              return res;\n            });\n          }\n          return res;\n\n        }.bind(this)).then(\n        function(res) {\n          if (geocoderError) {\n            throw geocoderError;\n          }\n\n          // apply results filter if provided\n          if (this.options.filter && res.features.length) {\n            res.features = res.features.filter(this.options.filter);\n          }\n\n          if (res.features.length) {\n            this._clearEl.style.display = 'block';\n            this._eventEmitter.emit('results', res);\n            this._typeahead.update(res.features);\n          } else {\n            this._clearEl.style.display = 'none';\n            this._typeahead.selected = null;\n            this._renderNoResults();\n            this._eventEmitter.emit('results', res);\n          }\n\n        }.bind(this)\n      ).catch(\n        function(err) {\n          this._loadingEl.style.display = 'none';\n\n          // in the event of an error in the Mapbox Geocoding API still display results from the localGeocoder\n          if ((localGeocoderRes.length && this.options.localGeocoder) || (externalGeocoderRes.length && this.options.externalGeocoder) ) {\n            this._clearEl.style.display = 'block';\n            this._typeahead.update(localGeocoderRes);\n          } else {\n            this._clearEl.style.display = 'none';\n            this._typeahead.selected = null;\n            this._renderError();\n          }\n\n          this._eventEmitter.emit('results', { features: localGeocoderRes });\n          this._eventEmitter.emit('error', { error: err });\n        }.bind(this)\n      );\n\n    return request;\n  },\n\n  /**\n   * Shared logic for clearing input\n   * @param {Event} [ev] the event that triggered the clear, if available\n   * @private\n   *\n   */\n  _clear: function(ev) {\n    if (ev) ev.preventDefault();\n    this._inputEl.value = '';\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    this._onChange();\n    this._clearEl.style.display = 'none';\n    this._removeMarker();\n    this.lastSelected = null;\n    this._eventEmitter.emit('clear');\n    this.fresh = true;\n  },\n\n  /**\n   * Clear and then focus the input.\n   * @param {Event} [ev] the event that triggered the clear, if available\n   *\n   */\n  clear: function(ev) {\n    this._clear(ev);\n    this._inputEl.focus();\n  },\n\n\n  /**\n   * Clear the input, without refocusing it. Used to implement clearOnBlur\n   * constructor option.\n   * @param {Event} [ev] the blur event\n   * @private\n   */\n  _clearOnBlur: function(ev) {\n    var ctx = this;\n\n    /*\n     * If relatedTarget is not found, assume user targeted the suggestions list.\n     * In that case, do not clear on blur. There are other edge cases where\n     * ev.relatedTarget could be null. Clicking on list always results in null\n     * relatedtarget because of upstream behavior in `suggestions`.\n     *\n     * The ideal solution would be to check if ev.relatedTarget is a child of\n     * the list. See issue #258 for details on why we can't do that yet.\n     */\n    if (ev.relatedTarget) {\n      ctx._clear(ev);\n    }\n  },\n\n  _onQueryResult: function(response) {\n    var results = response.body;\n    if (!results.features.length) return;\n    var result = results.features[0];\n    this._typeahead.selected = result;\n    this._inputEl.value = result.place_name;\n    this._onChange();\n  },\n\n  _updateProximity: function() {\n    // proximity is designed for local scale, if the user is looking at the whole world,\n    // it doesn't make sense to factor in the arbitrary centre of the map\n    if (!this._map){\n      return;\n    }\n    if (this._map.getZoom() > 9) {\n      var center = this._map.getCenter().wrap();\n      this.setProximity({ longitude: center.lng, latitude: center.lat });\n    } else {\n      this.setProximity(null);\n    }\n  },\n\n  _collapse: function() {\n    // do not collapse if input is in focus\n    if (!this._inputEl.value && this._inputEl !== document.activeElement) this.container.classList.add('mapboxgl-ctrl-geocoder--collapsed');\n  },\n\n  _unCollapse: function() {\n    this.container.classList.remove('mapboxgl-ctrl-geocoder--collapsed');\n  },\n\n  /**\n   * Set & query the input\n   * @param {string} searchInput location name or other search input\n   * @returns {MapboxGeocoder} this\n   */\n  query: function(searchInput) {\n    this._geocode(searchInput).then(this._onQueryResult);\n    return this;\n  },\n\n  _renderError: function(){\n    var errorMessage = \"<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>\"\n    this._renderMessage(errorMessage);\n  },\n\n  _renderNoResults: function(){\n    var errorMessage = \"<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>\";\n    this._renderMessage(errorMessage);\n  },\n\n  _renderMessage: function(msg){\n    this._typeahead.update([]);\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    this._typeahead.renderError(msg);\n  },\n\n  /**\n   * Get the text to use as the search bar placeholder\n   *\n   * If placeholder is provided in options, then use options.placeholder\n   * Otherwise, if language is provided in options, then use the localized string of the first language if available\n   * Otherwise use the default\n   *\n   * @returns {String} the value to use as the search bar placeholder\n   * @private\n   */\n  _getPlaceholderText: function(){\n    if (this.options.placeholder) return this.options.placeholder;\n    if (this.options.language){\n      var firstLanguage = this.options.language.split(\",\")[0];\n      var language = subtag.language(firstLanguage);\n      var localizedValue = localization.placeholder[language];\n      if (localizedValue)  return localizedValue;\n    }\n    return 'Search';\n  },\n\n  /**\n   * Set input\n   * @param {string} searchInput location name or other search input\n   * @returns {MapboxGeocoder} this\n   */\n  setInput: function(searchInput) {\n    // Set input value to passed value and clear everything else.\n    this._inputEl.value = searchInput;\n    this._typeahead.selected = null;\n    this._typeahead.clear();\n    if (searchInput.length >= this.options.minLength) {\n      this._geocode(searchInput);\n    }\n    return this;\n  },\n\n  /**\n   * Set proximity\n   * @param {Object} proximity The new `options.proximity` value. This is a geographical point given as an object with `latitude` and `longitude` properties.\n   * @returns {MapboxGeocoder} this\n   */\n  setProximity: function(proximity) {\n    this.options.proximity = proximity;\n    return this;\n  },\n\n  /**\n   * Get proximity\n   * @returns {Object} The geocoder proximity\n   */\n  getProximity: function() {\n    return this.options.proximity;\n  },\n\n  /**\n   * Set the render function used in the results dropdown\n   * @param {Function} fn The function to use as a render function. This function accepts a single [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) object as input and returns a string.\n   * @returns {MapboxGeocoder} this\n   */\n  setRenderFunction: function(fn){\n    if (fn && typeof(fn) == \"function\"){\n      this._typeahead.render = fn;\n    }\n    return this;\n  },\n\n  /**\n   * Get the function used to render the results dropdown\n   *\n   * @returns {Function} the render function\n   */\n  getRenderFunction: function(){\n    return this._typeahead.render;\n  },\n\n  /**\n   * Get the language to use in UI elements and when making search requests\n   *\n   * Look first at the explicitly set options otherwise use the browser's language settings\n   * @param {String} language Specify the language to use for response text and query result weighting. Options are IETF language tags comprised of a mandatory ISO 639-1 language code and optionally one or more IETF subtags for country or script. More than one value can also be specified, separated by commas.\n   * @returns {MapboxGeocoder} this\n   */\n  setLanguage: function(language){\n    var browserLocale = navigator.language || navigator.userLanguage || navigator.browserLanguage;\n    this.options.language = language || this.options.language || browserLocale;\n    return this;\n  },\n\n  /**\n   * Get the language to use in UI elements and when making search requests\n   * @returns {String} The language(s) used by the plugin, if any\n   */\n  getLanguage: function(){\n    return this.options.language;\n  },\n\n  /**\n   * Get the zoom level the map will move to when there is no bounding box on the selected result\n   * @returns {Number} the map zoom\n   */\n  getZoom: function(){\n    return this.options.zoom;\n  },\n\n  /**\n   * Set the zoom level\n   * @param {Number} zoom The zoom level that the map should animate to when a `bbox` isn't found in the response. If a `bbox` is found the map will fit to the `bbox`.\n   * @returns {MapboxGeocoder} this\n   */\n  setZoom: function(zoom){\n    this.options.zoom = zoom;\n    return this;\n  },\n\n  /**\n   * Get the parameters used to fly to the selected response, if any\n   * @returns {Boolean|Object} The `flyTo` option\n   */\n  getFlyTo: function(){\n    return this.options.flyTo;\n  },\n\n  /**\n   * Set the flyTo options\n   * @param {Boolean|Object} flyTo If false, animating the map to a selected result is disabled. If true, animating the map will use the default animation parameters. If an object, it will be passed as `options` to the map [`flyTo`](https://docs.mapbox.com/mapbox-gl-js/api/#map#flyto) or [`fitBounds`](https://docs.mapbox.com/mapbox-gl-js/api/#map#fitbounds) method providing control over the animation of the transition.\n   */\n  setFlyTo: function(flyTo){\n    this.options.flyTo = flyTo;\n    return this;\n  },\n\n  /**\n   * Get the value of the placeholder string\n   * @returns {String} The input element's placeholder value\n   */\n  getPlaceholder: function(){\n    return this.options.placeholder;\n  },\n\n  /**\n   * Set the value of the input element's placeholder\n   * @param {String} placeholder the text to use as the input element's placeholder\n   * @returns {MapboxGeocoder} this\n   */\n  setPlaceholder: function(placeholder){\n    this.placeholder = (placeholder) ? placeholder : this._getPlaceholderText();\n    this._inputEl.placeholder = this.placeholder;\n    this._inputEl.setAttribute('aria-label', this.placeholder);\n    return this\n  },\n\n  /**\n   * Get the bounding box used by the plugin\n   * @returns {Array<Number>} the bounding box, if any\n   */\n  getBbox: function(){\n    return this.options.bbox;\n  },\n\n  /**\n   * Set the bounding box to limit search results to\n   * @param {Array<Number>} bbox a bounding box given as an array in the format [minX, minY, maxX, maxY].\n   * @returns {MapboxGeocoder} this\n   */\n  setBbox: function(bbox){\n    this.options.bbox = bbox;\n    return this;\n  },\n\n  /**\n   * Get a list of the countries to limit search results to\n   * @returns {String} a comma separated list of countries to limit to, if any\n   */\n  getCountries: function(){\n    return this.options.countries;\n  },\n\n  /**\n   * Set the countries to limit search results to\n   * @param {String} countries a comma separated list of countries to limit to\n   * @returns {MapboxGeocoder} this\n   */\n  setCountries: function(countries){\n    this.options.countries = countries;\n    return this;\n  },\n\n  /**\n   * Get a list of the types to limit search results to\n   * @returns {String} a comma separated list of types to limit to\n   */\n  getTypes: function(){\n    return this.options.types;\n  },\n\n  /**\n   * Set the types to limit search results to\n   * @param {String} countries a comma separated list of types to limit to\n   * @returns {MapboxGeocoder} this\n   */\n  setTypes: function(types){\n    this.options.types = types;\n    return this;\n  },\n\n  /**\n   * Get the minimum number of characters typed to trigger results used in the plugin\n   * @returns {Number} The minimum length in characters before a search is triggered\n   */\n  getMinLength: function(){\n    return this.options.minLength;\n  },\n\n  /**\n   * Set the minimum number of characters typed to trigger results used by the plugin\n   * @param {Number} minLength the minimum length in characters\n   * @returns {MapboxGeocoder} this\n   */\n  setMinLength: function(minLength){\n    this.options.minLength = minLength;\n    if (this._typeahead)  this._typeahead.minLength = minLength;\n    return this;\n  },\n\n  /**\n   * Get the limit value for the number of results to display used by the plugin\n   * @returns {Number} The limit value for the number of results to display used by the plugin\n   */\n  getLimit: function(){\n    return this.options.limit;\n  },\n\n  /**\n   * Set the limit value for the number of results to display used by the plugin\n   * @param {Number} limit the number of search results to return\n   * @returns {MapboxGeocoder}\n   */\n  setLimit: function(limit){\n    this.options.limit = limit;\n    if (this._typeahead) this._typeahead.options.limit = limit;\n    return this;\n  },\n\n  /**\n   * Get the filter function used by the plugin\n   * @returns {Function} the filter function\n   */\n  getFilter: function(){\n    return this.options.filter;\n  },\n\n  /**\n   * Set the filter function used by the plugin.\n   * @param {Function} filter A function which accepts a Feature in the [Carmen GeoJSON](https://github.com/mapbox/carmen/blob/master/carmen-geojson.md) format to filter out results from the Geocoding API response before they are included in the suggestions list. Return `true` to keep the item, `false` otherwise.\n   * @returns {MapboxGeocoder} this\n   */\n  setFilter: function(filter){\n    this.options.filter = filter;\n    return this;\n  },\n\n  /**\n   * Set the geocoding endpoint used by the plugin.\n   * @param {Function} origin A function which accepts an HTTPS URL to specify the endpoint to query results from.\n   * @returns {MapboxGeocoder} this\n   */\n  setOrigin: function(origin){\n    this.options.origin = origin;\n    this.geocoderService = mbxGeocoder(\n      MapboxClient({\n        accessToken: this.options.accessToken,\n        origin: this.options.origin\n      })\n    );\n    return this;\n  },\n\n  /**\n   * Get the geocoding endpoint the plugin is currently set to\n   * @returns {Function} the endpoint URL\n   */\n  getOrigin: function(){\n    return this.options.origin;\n  },\n\n  /**\n   * Handle the placement of a result marking the selected result\n   * @private\n   * @param {Object} selected the selected geojson feature\n   * @returns {MapboxGeocoder} this\n   */\n  _handleMarker: function(selected){\n    // clean up any old marker that might be present\n    if (!this._map){\n      return;\n    }\n    this._removeMarker();\n    var defaultMarkerOptions = {\n      color: '#4668F2'\n    }\n    var markerOptions = extend({}, defaultMarkerOptions, this.options.marker)\n    this.mapMarker = new this._mapboxgl.Marker(markerOptions);\n    if (selected.center) {\n      this.mapMarker\n        .setLngLat(selected.center)\n        .addTo(this._map);\n    } else if (selected.geometry && selected.geometry.type && selected.geometry.type === 'Point' && selected.geometry.coordinates) {\n      this.mapMarker\n        .setLngLat(selected.geometry.coordinates)\n        .addTo(this._map);\n    }\n    return this;\n  },\n\n  /**\n   * Handle the removal of a result marker\n   * @private\n   */\n  _removeMarker: function(){\n    if (this.mapMarker){\n      this.mapMarker.remove();\n      this.mapMarker = null;\n    }\n  },\n\n  /**\n   * Subscribe to events that happen within the plugin.\n   * @param {String} type name of event. Available events and the data passed into their respective event objects are:\n   *\n   * - __clear__ `Emitted when the input is cleared`\n   * - __loading__ `{ query } Emitted when the geocoder is looking up a query`\n   * - __results__ `{ results } Fired when the geocoder returns a response`\n   * - __result__ `{ result } Fired when input is set`\n   * - __error__ `{ error } Error as string`\n   * @param {Function} fn function that's called when the event is emitted.\n   * @returns {MapboxGeocoder} this;\n   */\n  on: function(type, fn) {\n    this._eventEmitter.on(type, fn);\n    return this;\n  },\n\n  /**\n   * Remove an event\n   * @returns {MapboxGeocoder} this\n   * @param {String} type Event name.\n   * @param {Function} fn Function that should unsubscribe to the event emitted.\n   */\n  off: function(type, fn) {\n    this._eventEmitter.removeListener(type, fn);\n    this.eventManager.remove();\n    return this;\n  }\n};\n\nmodule.exports = MapboxGeocoder;\n","'use strict';\n\n/**\n * Localized values for the placeholder string\n * \n * @private\n */\nvar placeholder = {\n  // list drawn from https://docs.mapbox.com/api/search/#language-coverage\n  'de': 'Suche', // german\n  'it': 'Ricerca', //italian\n  'en': 'Search', // english\n  'nl': 'Zoeken', //dutch\n  'fr': 'Chercher',  //french\n  'ca': 'Cerca', //catalan\n  'he': '', //hebrew\n  'ja': '',  //japanese\n  'lv': 'Meklt', //latvian\n  'pt': 'Procurar', //portuguese \n  'sr': '', //serbian\n  'zh': '', //chinese-simplified\n  'cs': 'Vyhledvn', //czech\n  'hu': 'Keress', //hungarian\n  'ka': '', // georgian\n  'nb': 'Ske', //norwegian\n  'sk': 'Vyhadvanie', //slovak\n  'th': '', //thai\n  'fi': 'Hae',//finnish\n  'is': 'Leita',//icelandic\n  'ko': '',//korean\n  'pl':  'Szukaj', //polish\n  'sl': 'Iskanje', //slovenian\n  'fa': '' //persian(aka farsi)\n}\n\nmodule.exports = {placeholder: placeholder};\n","// This file replaces `index.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\nif (process.env.NODE_ENV !== 'production') {\n  // All bundlers will remove this block in production bundle\n  if (typeof navigator !== 'undefined' && navigator.product === 'ReactNative') {\n    throw new Error(\n      'React Native does not have a built-in secure random generator. ' +\n      'If you dont need unpredictable IDs, you can use `nanoid/non-secure`. ' +\n      'For secure ID install `expo-random` locally and use `nanoid/async`.'\n    )\n  }\n  if (typeof self === 'undefined' || (!self.crypto && !self.msCrypto)) {\n    throw new Error(\n      'Your browser does not have secure random generator. ' +\n      'If you dont need unpredictable IDs, you can use nanoid/non-secure.'\n    )\n  }\n}\n\nvar crypto = self.crypto || self.msCrypto\n\n// This alphabet uses a-z A-Z 0-9 _- symbols.\n// Symbols are generated for smaller size.\n// -_zyxwvutsrqponmlkjihgfedcba9876543210ZYXWVUTSRQPONMLKJIHGFEDCBA\nvar url = '-_'\n// Loop from 36 to 0 (from z to a and 9 to 0 in Base36).\nvar i = 36\nwhile (i--) {\n  // 36 is radix. Number.prototype.toString(36) returns number\n  // in Base36 representation. Base36 is like hex, but it uses 09 and a-z.\n  url += i.toString(36)\n}\n// Loop from 36 to 10 (from Z to A in Base36).\ni = 36\nwhile (i-- - 10) {\n  url += i.toString(36).toUpperCase()\n}\n\nmodule.exports = function (size) {\n  var id = ''\n  var bytes = crypto.getRandomValues(new Uint8Array(size || 21))\n  i = size || 21\n\n  // Compact alternative for `for (var i = 0; i < size; i++)`\n  while (i--) {\n    // We cant use bytes bigger than the alphabet. 63 is 00111111 bitmask.\n    // This mask reduces random byte 0-255 to 0-63 values.\n    // There is no need in `|| ''` and `* 1.6` hacks in here,\n    // because bitmask trim bytes exact to alphabet size.\n    id += url[bytes[i] & 63]\n  }\n  return id\n}\n","!function(root, name, make) {\r\n  if (typeof module != 'undefined' && module.exports) module.exports = make()\r\n  else root[name] = make()\r\n}(this, 'subtag', function() {\r\n\r\n  var empty = ''\r\n  var pattern = /^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/\r\n\r\n  function match(tag) {\r\n    return tag.match(pattern) || []\r\n  }\r\n\r\n  function split(tag) {\r\n    return match(tag).filter(function(v, i) { return v && i })\r\n  }\r\n\r\n  function api(tag) {\r\n    tag = match(tag)\r\n    return {\r\n      language: tag[1] || empty,\r\n      extlang: tag[2] || empty,\r\n      script: tag[3] || empty,\r\n      region: tag[4] || empty\r\n    }\r\n  }\r\n\r\n  function expose(target, key, value) {\r\n    Object.defineProperty(target, key, {\r\n      value: value,\r\n      enumerable: true\r\n    })\r\n  }\r\n\r\n  function part(position, pattern, type) {\r\n    function method(tag) {\r\n      return match(tag)[position] || empty\r\n    }\r\n    expose(method, 'pattern', pattern)\r\n    expose(api, type, method)\r\n  }\r\n\r\n  part(1, /^[a-zA-Z]{2,3}$/, 'language')\r\n  part(2, /^[a-zA-Z]{3}$/, 'extlang')\r\n  part(3, /^[a-zA-Z]{4}$/, 'script')\r\n  part(4, /^[a-zA-Z]{2}$|^[0-9]{3}$/, 'region')\r\n\r\n  expose(api, 'split', split)\r\n\r\n  return api\r\n});\r\n","'use strict';\n\n/**\n * A typeahead component for inputs\n * @class Suggestions\n *\n * @param {HTMLInputElement} el A valid HTML input element\n * @param {Array} data An array of data used for results\n * @param {Object} options\n * @param {Number} [options.limit=5] Max number of results to display in the auto suggest list.\n * @param {Number} [options.minLength=2] Number of characters typed into an input to trigger suggestions.\n * @param {Boolean} [options.hideOnBlur=true] If `true`, hides the suggestions when focus is lost.\n * @return {Suggestions} `this`\n * @example\n * // in the browser\n * var input = document.querySelector('input');\n * var data = [\n *   'Roy Eldridge',\n *   'Roy Hargrove',\n *   'Rex Stewart'\n * ];\n *\n * new Suggestions(input, data);\n *\n * // with options\n * var input = document.querySelector('input');\n * var data = [{\n *   name: 'Roy Eldridge',\n *   year: 1911\n * }, {\n *   name: 'Roy Hargrove',\n *   year: 1969\n * }, {\n *   name: 'Rex Stewart',\n *   year: 1907\n * }];\n *\n * var typeahead = new Suggestions(input, data, {\n *   filter: false, // Disable filtering\n *   minLength: 3, // Number of characters typed into an input to trigger suggestions.\n *   limit: 3, //  Max number of results to display.\n *   hideOnBlur: false // Don't hide results when input loses focus\n * });\n *\n * // As we're passing an object of an arrays as data, override\n * // `getItemValue` by specifying the specific property to search on.\n * typeahead.getItemValue = function(item) { return item.name };\n *\n * input.addEventListener('change', function() {\n *   console.log(typeahead.selected); // Current selected item.\n * });\n *\n * // With browserify\n * var Suggestions = require('suggestions');\n *\n * new Suggestions(input, data);\n */\nvar Suggestions = require('./src/suggestions');\nmodule.exports = Suggestions;\n\nif (typeof window !== 'undefined') {\n  window.Suggestions = Suggestions;\n}\n","'use strict';\n\nvar List = function(component) {\n  this.component = component;\n  this.items = [];\n  this.active = 0;\n  this.wrapper = document.createElement('div');\n  this.wrapper.className = 'suggestions-wrapper';\n  this.element = document.createElement('ul');\n  this.element.className = 'suggestions';\n  this.wrapper.appendChild(this.element);\n\n  // selectingListItem is set to true in the time between the mousedown and mouseup when clicking an item in the list\n  // mousedown on a list item will cause the input to blur which normally hides the list, so this flag is used to keep\n  // the list open until the mouseup\n  this.selectingListItem = false;\n\n  component.el.parentNode.insertBefore(this.wrapper, component.el.nextSibling);\n  return this;\n};\n\nList.prototype.show = function() {\n  this.element.style.display = 'block';\n};\n\nList.prototype.hide = function() {\n  this.element.style.display = 'none';\n};\n\nList.prototype.add = function(item) {\n  this.items.push(item);\n};\n\nList.prototype.clear = function() {\n  this.items = [];\n  this.active = 0;\n};\n\nList.prototype.isEmpty = function() {\n  return !this.items.length;\n};\n\nList.prototype.isVisible = function() {\n  return this.element.style.display === 'block';\n};\n\nList.prototype.draw = function() {\n  this.element.innerHTML = '';\n\n  if (this.items.length === 0) {\n    this.hide();\n    return;\n  }\n\n  for (var i = 0; i < this.items.length; i++) {\n    this.drawItem(this.items[i], this.active === i);\n  }\n\n  this.show();\n};\n\nList.prototype.drawItem = function(item, active) {\n  var li = document.createElement('li'),\n    a = document.createElement('a');\n\n  if (active) li.className += ' active';\n\n  a.innerHTML = item.string;\n\n  li.appendChild(a);\n  this.element.appendChild(li);\n\n  li.addEventListener('mousedown', function() {\n    this.selectingListItem = true;\n  }.bind(this));\n\n  li.addEventListener('mouseup', function() {\n    this.handleMouseUp.call(this, item);\n  }.bind(this));\n};\n\nList.prototype.handleMouseUp = function(item) {\n  this.selectingListItem = false;\n  this.component.value(item.original);\n  this.clear();\n  this.draw();\n};\n\nList.prototype.move = function(index) {\n  this.active = index;\n  this.draw();\n};\n\nList.prototype.previous = function() {\n  this.move(this.active === 0 ? this.items.length - 1 : this.active - 1);\n};\n\nList.prototype.next = function() {\n  this.move(this.active === this.items.length - 1 ? 0 : this.active + 1);\n};\n\nList.prototype.drawError = function(msg){\n  var li = document.createElement('li');\n\n  li.innerHTML = msg;\n\n  this.element.appendChild(li);\n  this.show();\n}\n\nmodule.exports = List;\n","'use strict';\n\nvar extend = require('xtend');\nvar fuzzy = require('fuzzy');\nvar List = require('./list');\n\nvar Suggestions = function(el, data, options) {\n  options = options || {};\n\n  this.options = extend({\n    minLength: 2,\n    limit: 5,\n    filter: true,\n    hideOnBlur: true\n  }, options);\n\n  this.el = el;\n  this.data = data || [];\n  this.list = new List(this);\n\n  this.query = '';\n  this.selected = null;\n\n  this.list.draw();\n\n  this.el.addEventListener('keyup', function(e) {\n    this.handleKeyUp(e.keyCode);\n  }.bind(this), false);\n\n  this.el.addEventListener('keydown', function(e) {\n    this.handleKeyDown(e);\n  }.bind(this));\n\n  this.el.addEventListener('focus', function() {\n    this.handleFocus();\n  }.bind(this));\n\n  this.el.addEventListener('blur', function() {\n    this.handleBlur();\n  }.bind(this));\n\n  this.el.addEventListener('paste', function(e) {\n    this.handlePaste(e);\n  }.bind(this));\n\n  // use user-provided render function if given, otherwise just use the default\n  this.render = (this.options.render) ? this.options.render.bind(this) : this.render.bind(this)\n\n  this.getItemValue = (this.options.getItemValue) ? this.options.getItemValue.bind(this) : this.getItemValue.bind(this);\n\n  return this;\n};\n\nSuggestions.prototype.handleKeyUp = function(keyCode) {\n  // 40 - DOWN\n  // 38 - UP\n  // 27 - ESC\n  // 13 - ENTER\n  // 9 - TAB\n\n  if (keyCode === 40 ||\n      keyCode === 38 ||\n      keyCode === 27 ||\n      keyCode === 13 ||\n      keyCode === 9) return;\n\n  this.handleInputChange(this.el.value);\n};\n\nSuggestions.prototype.handleKeyDown = function(e) {\n  switch (e.keyCode) {\n    case 13: // ENTER\n    case 9: // TAB\n      if (!this.list.isEmpty()) {\n        if (this.list.isVisible()) {\n          e.preventDefault();\n        }\n        this.value(this.list.items[this.list.active].original);\n        this.list.hide();\n      }\n    break;\n    case 27: // ESC\n      if (!this.list.isEmpty()) this.list.hide();\n    break;\n    case 38: // UP\n      this.list.previous();\n    break;\n    case 40: // DOWN\n      this.list.next();\n    break;\n  }\n};\n\nSuggestions.prototype.handleBlur = function() {\n  if (!this.list.selectingListItem && this.options.hideOnBlur) {\n    this.list.hide();\n  }\n};\n\nSuggestions.prototype.handlePaste = function(e) {\n  if (e.clipboardData) {\n    this.handleInputChange(e.clipboardData.getData('Text'));\n  } else {\n    var self = this;\n    setTimeout(function () {\n      self.handleInputChange(e.target.value);\n    }, 100);\n  }\n};\n\nSuggestions.prototype.handleInputChange = function(query) {\n  this.query = this.normalize(query);\n\n  this.list.clear();\n\n  if (this.query.length < this.options.minLength) {\n    this.list.draw();\n    return;\n  }\n\n  this.getCandidates(function(data) {\n    for (var i = 0; i < data.length; i++) {\n      this.list.add(data[i]);\n      if (i === (this.options.limit - 1)) break;\n    }\n    this.list.draw();\n  }.bind(this));\n};\n\nSuggestions.prototype.handleFocus = function() {\n  if (!this.list.isEmpty()) this.list.show();\n  this.list.selectingListItem = false;\n};\n\n/**\n * Update data previously passed\n *\n * @param {Array} revisedData\n */\nSuggestions.prototype.update = function(revisedData) {\n  this.data = revisedData;\n  this.handleKeyUp();\n};\n\n/**\n * Clears data\n */\nSuggestions.prototype.clear = function() {\n  this.data = [];\n  this.list.clear();\n};\n\n/**\n * Normalize the results list and input value for matching\n *\n * @param {String} value\n * @return {String}\n */\nSuggestions.prototype.normalize = function(value) {\n  value = value.toLowerCase();\n  return value;\n};\n\n/**\n * Evaluates whether an array item qualifies as a match with the current query\n *\n * @param {String} candidate a possible item from the array passed\n * @param {String} query the current query\n * @return {Boolean}\n */\nSuggestions.prototype.match = function(candidate, query) {\n  return candidate.indexOf(query) > -1;\n};\n\nSuggestions.prototype.value = function(value) {\n  this.selected = value;\n  this.el.value = this.getItemValue(value);\n\n  if (document.createEvent) {\n    var e = document.createEvent('HTMLEvents');\n    e.initEvent('change', true, false);\n    this.el.dispatchEvent(e);\n  } else {\n    this.el.fireEvent('onchange');\n  }\n};\n\nSuggestions.prototype.getCandidates = function(callback) {\n  var options = {\n    pre: '<strong>',\n    post: '</strong>',\n    extract: function(d) { return this.getItemValue(d); }.bind(this)\n  };\n  var results;\n  if(this.options.filter){\n    results = fuzzy.filter(this.query, this.data, options);\n\n    results = results.map(function(item){\n      return {\n        original: item.original,\n        string: this.render(item.original, item.string)\n      };\n    }.bind(this))\n  }else{\n    results = this.data.map(function(d) {\n      var renderedString = this.render(d);\n      return {\n        original: d,\n        string: renderedString\n      };\n    }.bind(this));\n  }\n  callback(results);\n};\n\n/**\n * For a given item in the data array, return what should be used as the candidate string\n *\n * @param {Object|String} item an item from the data array\n * @return {String} item\n */\nSuggestions.prototype.getItemValue = function(item) {\n  return item;\n};\n\n/**\n * For a given item in the data array, return a string of html that should be rendered in the dropdown\n * @param {Object|String} item an item from the data array\n * @param {String} sourceFormatting a string that has pre-formatted html that should be passed directly through the render function \n * @return {String} html\n */\nSuggestions.prototype.render = function(item, sourceFormatting) {\n  if (sourceFormatting){\n    // use existing formatting on the source string\n    return sourceFormatting;\n  }\n  var boldString = (item.original) ? this.getItemValue(item.original) : this.getItemValue(item);\n  var indexString = this.normalize(boldString);\n  var indexOfQuery = indexString.lastIndexOf(this.query);\n  while (indexOfQuery > -1) {\n    var endIndexOfQuery = indexOfQuery + this.query.length;\n    boldString = boldString.slice(0, indexOfQuery) + '<strong>' + boldString.slice(indexOfQuery, endIndexOfQuery) + '</strong>' + boldString.slice(endIndexOfQuery);\n    indexOfQuery = indexString.slice(0, indexOfQuery).lastIndexOf(this.query);\n  }\n  return boldString\n}\n\n/**\n * Render an custom error message in the suggestions list\n * @param {String} msg An html string to render as an error message\n */\nSuggestions.prototype.renderError = function(msg){\n  this.list.drawError(msg);\n}\n\nmodule.exports = Suggestions;\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n"],"names":["isPlainObject","xtend","DEFAULT_ERROR_PATH","NEWLINE_INDENT","v","createArrayValidator","validators","validatingTuple","Array","isArray","value","index","validationResult","validate","plainArray","length","i","concat","validator","hasOwnProperty","result","processMessage","message","options","len","path","slice","formatErrorMessage","nounPhrase","test","addArticle","prettifyResult","orList","list","join","prettyResult","isArrayCulprit","assert","rootValidator","errorMessage","apiName","Error","shape","validatorObj","obj","Object","keys","map","key","plainObject","errorMessages","push","split","objectId","strictShape","shapeValidator","shapeResult","invalidKeys","reduce","memo","valueKey","undefined","arrayOf","tuple","arguments","prototype","call","required","requiredValidator","apply","this","__required","oneOfType","messages","filter","Boolean","every","m","max","arr","equal","compareWith","JSON","stringify","oneOf","range","min","number","any","boolean","string","func","module","exports","client","browser","MapiClient","BrowserClient","create","constructor","sendRequest","browserSend","abortRequest","browserAbort","MapiResponse","MapiError","constants","parseHeaders","requestsUnderway","normalizeBrowserProgressEvent","event","total","transferred","loaded","percent","sendRequestXhr","request","xhr","Promise","resolve","reject","onprogress","emitter","emit","EVENT_PROGRESS_DOWNLOAD","file","upload","EVENT_PROGRESS_UPLOAD","onerror","error","onabort","mapiError","type","ERROR_REQUEST_ABORTED","onload","id","status","body","response","statusCode","send","then","headers","getAllResponseHeaders","createResponse","createRequestXhr","accessToken","url","window","XMLHttpRequest","open","method","forEach","setRequestHeader","abort","parseToken","MapiRequest","origin","API_ORIGIN","createRequest","requestOptions","errorType","ERROR_HTTP","parse","e","EventEmitter","urlUtils","requestId","defaultHeaders","headersWithDefaults","name","toLowerCase","_options","sent","aborted","query","params","encoding","sendFileAs","prependOrigin","appendQueryObject","routeParams","actualAccessToken","appendQueryParam","accessTokenOwnerId","user","ownerId","interpolateRouteParams","self","EVENT_RESPONSE","EVENT_ERROR","_nextPageRequest","eachPage","callback","handleResponse","nextPageRequest","nextPage","getPage","handleError","clone","_extend","extendedOptions","parseLinkHeader","responseData","rawBody","parseError","links","link","hasNextPage","next","raw","trim","rawHeader","parsed","boundary","indexOf","substring","parseSingleHeader","linkHeader","parts","match","linkUrl","linkParams","rel","parsedLinkParams","param","parseParam","parseLink","encodeValue","encodeURIComponent","String","punctuation","queryObject","delimiter","replace","route","_","paramId","has","prefix","Events","EE","fn","context","once","addListener","TypeError","listener","evt","_events","_eventsCount","clearEvent","__proto__","eventNames","events","names","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","a1","a2","a3","a4","a5","args","removeListener","j","on","removeAllListeners","off","prefixed","pick","stringifyBooleans","createServiceFactory","Geocoding","featureTypes","forwardGeocode","config","assertShape","mode","countries","proximity","coordinates","types","autocomplete","bbox","limit","language","routing","country","reverseGeocode","reverseMode","createClient","ServicePrototype","clientOrConfig","isPrototypeOf","service","cb","source","val","objectMap","g","Blob","ArrayBuffer","pipe","date","msg","Date","getTime","isNaN","base64","tokenCache","token","usage","rawPayload","parsedPayload","decode","parsePaylod","u","authorization","a","expires","exp","created","iat","scopes","lastLogin","ll","impersonator","iu","root","freeExports","freeGlobal","global","InvalidCharacterError","TABLE","REGEX_SPACE_CHARACTERS","input","b","c","buffer","padding","output","position","charCodeAt","charAt","bitStorage","bitCounter","fromCharCode","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","Function","ownKeys","getOwnPropertyNames","NumberIsNaN","Number","init","errorListener","err","resolver","eventTargetAgnosticAddListener","handler","flags","addErrorHandlerIfEventEmitter","_maxListeners","defaultMaxListeners","checkListener","_getMaxListeners","that","_addListener","prepend","existing","warning","newListener","unshift","warned","w","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","ret","unwrapListeners","arrayClone","n","copy","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","prependListener","prependOnceListener","originalListener","shift","pop","spliceOne","rawListeners","fuzzy","simpleFilter","pattern","array","str","opts","ch","patternIdx","totalScore","currScore","pre","post","compareString","caseSensitive","idx","Infinity","rendered","score","prev","element","extract","original","sort","compare","toString","x","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeSelf","objectToString","nativeMax","Math","nativeMin","now","isObject","toNumber","isObjectLike","isSymbol","other","valueOf","isBinary","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","thisArg","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","remainingWait","debounced","isInvoking","cancel","clearTimeout","flush","transformVector","matrix","vector","vec4","condition","PI","PI_4","DEGREES_TO_RADIANS","RADIANS_TO_DEGREES","EARTH_CIRCUMFERENCE","zoomToScale","zoom","pow","lngLatToWorld","_ref","scale","_ref2","lng","lat","isFinite","phi2","log","tan","worldToLngLat","_ref3","_ref4","y","lambda2","atan","getDistanceScales","_ref6","latitude","longitude","_ref6$highPrecision","highPrecision","worldSize","latCosine","cos","pixelsPerDegreeX","pixelsPerDegreeY","altPixelsPerMeter","pixelsPerMeter","metersPerPixel","pixelsPerDegree","degreesPerPixel","latCosine2","pixelsPerDegreeY2","altPixelsPerDegree2","altPixelsPerMeter2","pixelsPerDegree2","pixelsPerMeter2","getViewMatrix","_ref7","height","pitch","bearing","altitude","_ref7$center","center","_ref7$flipY","flipY","vm","mat4","vec3","getProjectionMatrix","_ref9","width","_getProjectionParamet","_ref8","_ref8$altitude","_ref8$pitch","_ref8$nearZMultiplier","nearZMultiplier","_ref8$farZMultiplier","farZMultiplier","pitchRadians","halfFov","topHalfSurfaceDistance","sin","farZ","fov","aspect","focalDistance","near","far","getProjectionParameters","worldToPixels","xyz","pixelProjectionMatrix","_xyz2","_xyz2$","z","pixelsToWorld","pixelUnprojectionMatrix","targetZ","_xyz3","coord","coord0","coord1","z0","z1","t","vec2","IDENTITY","bounds","_ref$padding","_ref$offset","offset","_bounds","_bounds$","west","south","_bounds$2","east","north","top","bottom","left","right","viewport","WebMercatorViewport","nw","project","se","size","abs","targetSize","scaleX","scaleY","offsetX","offsetY","centerLngLat","unproject","log2","_Viewport","_this","_ref$latitude","_ref$longitude","_ref$zoom","_ref$pitch","_ref$bearing","_ref$altitude","projectionMatrix","viewMatrix","freeze","lngLat","xy","fromLocation","pos","toLocation","translate","getMapCenterByLngLatPosition","_fitBounds2","assign","Viewport","_ref$viewMatrix","_ref$projectionMatrix","vpm","viewProjectionMatrix","mInverse","equals","projectPosition","unprojectPosition","projectFlat","unprojectFlat","_ref2$topLeft","topLeft","worldPosition","_coord","y2","_ref3$topLeft","_xyz","targetZWorld","_this$unprojectPositi","_this$unprojectPositi2","X","Y","Z","_this$projectFlat","_this$projectFlat2","_this$unprojectFlat","_this$unprojectFlat2","o","geocoder","cachedResult","initializeGeocoder","getMapboxMap","r","getContainerNode","props","inputValue","render","getItemValue","s","onInit","d","p","mapboxApiAccessToken","flyTo","placeholder","trackProximity","collapsed","clearAndBlurOnEsc","clearOnBlur","minLength","localGeocoder","localGeocoderOnly","enableEventLogging","marker","mapboxgl","subscribeEvents","appendChild","onAdd","addControl","find","setInput","place_name","showClearIcon","_clearEl","style","display","mapRef","current","getMap","containerRef","handleClear","handleLoading","handleResults","handleResult","unsubscribeEvents","removeGeocoder","removeControl","onClear","onLoading","onResults","onViewportChange","onResult","properties","short_code","f","fr","us","ru","ca","getContainer","getBoundingClientRect","h","fitBounds","transitionInterpolator","transitionDuration","_typeahead","selected","onError","componentDidMount","componentWillUnmount","componentDidUpdate","getGeocoder","propTypes","defaultProps","nanoid","MapboxEventManager","endpoint","access_token","version","sessionID","generateSessionID","userAgent","getUserAgent","locale","navigator","shouldEnableLogging","eventQueue","flushInterval","maxQueueSize","timer","lastSentInput","lastSentIndex","select","resultIndex","getSelectedIndex","payload","getEventPayload","resultPlaceName","resultId","queryString","start","keyevent","keyEvent","metaKey","keyCode","lastAction","getRequestOptions","host","_map","getZoom","sessionIdentifier","mapZoom","keyboardLocale","inputString","_inputEl","xhttp","header","onreadystatechange","readyState","statusText","headerValue","results","data","selectedID","feature","forceFlush","remove","Typeahead","debounce","extend","exceptions","MapboxClient","mbxGeocoder","localization","subtag","MapboxGeocoder","_eventEmitter","fresh","lastSelected","item","placeName","splice","addTo","container","addToExistingContainer","document","contains","el","_controlContainer","HTMLElement","parent","querySelectorAll","setLanguage","geocoderService","eventManager","_onChange","_onKeyDown","_onPaste","_onBlur","_showButton","_hideButton","_onQueryResult","clear","_updateProximity","_collapse","_unCollapse","_clear","_clearOnBlur","createElement","className","searchIcon","createIcon","setPlaceholder","actions","classList","add","setAttribute","buttonIcon","_loadingEl","setRenderFunction","mapMarker","_handleMarker","_mapboxgl","icon","createElementNS","innerHTML","SVGNodeContainer","SVGPath","firstChild","onRemove","parentNode","removeChild","_removeMarker","clipboardData","getData","_geocode","ESC_KEY_CODE","TAB_KEY_CODE","blur","shadowRoot","activeElement","flyOptions","defaultFlyOptions","focus","scrollLeft","setSelectionRange","searchInput","geocoderError","coords","parseFloat","reverse","localGeocoderRes","externalGeocoderRes","catch","res","features","externalGeocoder","update","_renderNoResults","_renderError","ev","preventDefault","relatedTarget","getCenter","wrap","setProximity","_renderMessage","renderError","_getPlaceholderText","firstLanguage","localizedValue","getProximity","getRenderFunction","browserLocale","userLanguage","browserLanguage","getLanguage","setZoom","getFlyTo","setFlyTo","getPlaceholder","getBbox","setBbox","getCountries","setCountries","getTypes","setTypes","getMinLength","setMinLength","getLimit","setLimit","getFilter","setFilter","setOrigin","getOrigin","markerOptions","color","Marker","setLngLat","geometry","crypto","msCrypto","toUpperCase","bytes","getRandomValues","Uint8Array","make","tag","api","extlang","script","region","expose","part","Suggestions","List","component","items","active","wrapper","selectingListItem","insertBefore","nextSibling","show","hide","isEmpty","isVisible","draw","drawItem","li","handleMouseUp","move","previous","drawError","hideOnBlur","handleKeyUp","handleKeyDown","handleFocus","handleBlur","handlePaste","handleInputChange","normalize","getCandidates","revisedData","candidate","createEvent","initEvent","dispatchEvent","fireEvent","sourceFormatting","boldString","indexString","indexOfQuery","lastIndexOf","endIndexOfQuery"],"sourceRoot":""}