{"version":3,"file":"../pages/search.js","mappings":"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","sources":["webpack://fall-in-asia-clinet/./sections/SearchPage/SearchPagePoster.tsx","webpack://fall-in-asia-clinet/./sections/SearchPage/SearchPostList.tsx","webpack://fall-in-asia-clinet/./pages/search.tsx","webpack://fall-in-asia-clinet/external \"@ant-design/icons\"","webpack://fall-in-asia-clinet/external \"@emotion/react\"","webpack://fall-in-asia-clinet/external \"@emotion/react/jsx-runtime\"","webpack://fall-in-asia-clinet/external \"@emotion/styled/base\"","webpack://fall-in-asia-clinet/external \"@reduxjs/toolkit\"","webpack://fall-in-asia-clinet/external \"antd\"","webpack://fall-in-asia-clinet/external \"axios\"","webpack://fall-in-asia-clinet/external \"dayjs\"","webpack://fall-in-asia-clinet/external \"dayjs/locale/ko\"","webpack://fall-in-asia-clinet/external \"dayjs/plugin/relativeTime\"","webpack://fall-in-asia-clinet/external \"next-redux-wrapper\"","webpack://fall-in-asia-clinet/external \"next/head\"","webpack://fall-in-asia-clinet/external \"next/router\"","webpack://fall-in-asia-clinet/external \"react\"","webpack://fall-in-asia-clinet/external \"react-redux\"","webpack://fall-in-asia-clinet/external \"react-toastify\"","webpack://fall-in-asia-clinet/external \"swr\""],"sourcesContent":["import React, { FC, useCallback, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { mainSlice } from \"slices/main\";\r\nimport styled from \"@emotion/styled\";\r\nimport { FLEX_STYLE, SM_SIZE, XLG_SIZE } from \"config\";\r\nimport tw from \"twin.macro\";\r\n\r\nconst SearchPagePosterWrapper = styled.section`\r\n  ${tw`w-full h-60`}\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: 100% 250%;\r\n  .poster-inner {\r\n    ${tw`h-full mx-auto`}\r\n    width: ${XLG_SIZE};\r\n    ${FLEX_STYLE(\"center\", \"flex-start\", \"column\")};\r\n    h1 {\r\n      ${tw`text-white font-bold mb-4`}\r\n    }\r\n    button {\r\n      ${tw`bg-white py-2 px-4 rounded-md`}\r\n    }\r\n  }\r\n  @media (max-width: ${XLG_SIZE}) {\r\n    ${tw`px-2`}\r\n  }\r\n  @media (max-width: ${SM_SIZE}) {\r\n    ${tw`px-0 h-52`}\r\n    ${FLEX_STYLE(\"center\", \"center\", \"column\")};\r\n    .poster-inner {\r\n      ${FLEX_STYLE(\"center\", \"center\", \"column\")};\r\n      ${tw`w-full`}\r\n      h1 {\r\n        ${tw`text-lg`}\r\n      }\r\n      button {\r\n        ${tw`text-xs`}\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\ninterface IProps {\r\n  searchWord: string;\r\n}\r\n\r\nconst SearchPagePoster: FC<IProps> = ({ searchWord }) => {\r\n  const dispatch = useDispatch();\r\n  const onClickSearchAnotherBtn = useCallback((e) => {\r\n    e.stopPropagation();\r\n    dispatch(mainSlice.actions.openSearchPopUp());\r\n  }, []);\r\n  return (\r\n    <SearchPagePosterWrapper\r\n      style={{\r\n        backgroundImage: `url(\"https://blog.kakaocdn.net/dn/dAuwyU/btqDGgSNmQb/KpJMSf5lC57ArjKLOyUxkK/img.jpg\"\r\n)`,\r\n      }}\r\n    >\r\n      <div className=\"poster-inner\">\r\n        <h1>{`\"${searchWord}\" 키워드 검색 결과`}</h1>\r\n        <button onClick={onClickSearchAnotherBtn}>다시 검색하기</button>\r\n      </div>\r\n    </SearchPagePosterWrapper>\r\n  );\r\n};\r\n\r\nexport default SearchPagePoster;\r\n","import { MinusCircleOutlined, PlusCircleOutlined } from \"@ant-design/icons\";\r\nimport ArticleColumnCard from \"@components/Cards/ArticleColumnCard\";\r\nimport MomentSmallCard from \"@components/Cards/ArticleSmallCard\";\r\nimport { IMoment, IStory } from \"@typings/db\";\r\nimport { Divider } from \"antd\";\r\nimport React, { FC, useCallback, useState } from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport { GRID_STYLE } from \"config\";\r\nimport tw from \"twin.macro\";\r\n\r\nconst SearchPostListWrapper = styled.section`\r\n  .searched-post-wrapper {\r\n    ${GRID_STYLE(\"1rem\", \"repeat(4,1fr)\")}\r\n    @media (max-width: 1000px) {\r\n      grid-template-columns: repeat(3, 1fr);\r\n    }\r\n    @media (max-width: 700px) {\r\n      grid-template-columns: repeat(2, 1fr);\r\n      gap: 0.5rem;\r\n    }\r\n    @media (max-width: 460px) {\r\n      ${tw`block`}\r\n    }\r\n  }\r\n`;\r\n\r\ninterface IProps {\r\n  stories?: IStory[];\r\n  moments?: IMoment[];\r\n}\r\n\r\nconst SearchPostList: FC<IProps> = ({ stories, moments }) => {\r\n  const [onMoreStories, setOnMoreStories] = useState(false);\r\n  const onClickMoreStories = useCallback(() => {\r\n    setOnMoreStories((prev) => !prev);\r\n  }, []);\r\n  return (\r\n    <SearchPostListWrapper>\r\n      <div className=\"searched-post-wrapper\">\r\n        {stories?.length! > 0 &&\r\n          stories?.slice(0, 9).map((v, i) => <ArticleColumnCard key={i} story={v} />)}\r\n        {moments?.length! > 0 &&\r\n          moments\r\n            ?.slice(0, 9)\r\n            .map((v, i) => <MomentSmallCard isSearchPage={true} moment={v} key={i} />)}\r\n      </div>\r\n      {stories?.length! > 8 ||\r\n        (moments?.length! > 8 && (\r\n          <Divider orientation=\"center\">\r\n            <a onClick={onClickMoreStories} className=\"more-icon\">\r\n              {onMoreStories ? <MinusCircleOutlined /> : <PlusCircleOutlined />}\r\n            </a>\r\n          </Divider>\r\n        ))}\r\n    </SearchPostListWrapper>\r\n  );\r\n};\r\n\r\nexport default SearchPostList;\r\n","import React, { FC, useCallback, useState } from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport XLGLayout from \"@layout/XLGLayout\";\r\nimport SearchPagePoster from \"@sections/SearchPage/SearchPagePoster\";\r\nimport SearchPostList from \"@sections/SearchPage/SearchPostList\";\r\nimport { IMoment, IStory } from \"@typings/db\";\r\nimport { getUserInfoAction } from \"actions/user\";\r\nimport axios from \"axios\";\r\nimport { wrapper } from \"configureStore\";\r\nimport { useRouter } from \"next/router\";\r\nimport useSWR from \"swr\";\r\nimport tw from \"twin.macro\";\r\nimport fetcher from \"utils/fetcher\";\r\nimport Head from \"next/head\";\r\n\r\nconst SearchPageWrapper = styled.div`\r\n  ${tw`bg-white pb-60 pt-16`}\r\n  .layout {\r\n    ${tw`bg-white`}\r\n  }\r\n`;\r\n\r\ninterface IProps {\r\n  searchPosts: { searchWord: string; moments: IMoment[]; stories: IStory[] };\r\n}\r\n\r\nconst index: FC<IProps> = ({ searchPosts }) => {\r\n  const { query } = useRouter();\r\n  const { data: searchPostsData } = useSWR<{\r\n    searchWord: string;\r\n    moments: IMoment[];\r\n    stories: IStory[];\r\n  }>(`/search/${encodeURIComponent(query?.keyword as string)}`, fetcher, {\r\n    initialData: searchPosts,\r\n    revalidateOnFocus: false,\r\n    revalidateOnReconnect: false,\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Search - {searchPostsData?.searchWord}</title>\r\n      </Head>\r\n      <SearchPageWrapper>\r\n        <SearchPagePoster searchWord={searchPostsData?.searchWord || \"\"} />\r\n        <XLGLayout>\r\n          <h3 className=\"main-title\">연대기</h3>\r\n          {searchPostsData && searchPostsData?.stories?.length > 0 ? (\r\n            <SearchPostList stories={searchPostsData?.stories} />\r\n          ) : (\r\n            <div>연대기가 없습니다.</div>\r\n          )}\r\n          <h3 className=\"main-title\">모멘트</h3>\r\n          {searchPostsData && searchPostsData?.moments?.length > 0 ? (\r\n            <SearchPostList moments={searchPostsData?.moments} />\r\n          ) : (\r\n            <div>모멘트가 없습니다.</div>\r\n          )}\r\n          <h3 className=\"main-title\">여행소식</h3>\r\n        </XLGLayout>\r\n      </SearchPageWrapper>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps = wrapper.getServerSideProps(\r\n  (store) =>\r\n    async ({ req, res, query }) => {\r\n      const cookie = req ? req.headers.cookie : \"\";\r\n      axios.defaults.headers.Cookie = \"\";\r\n      if (req && cookie) {\r\n        axios.defaults.headers.Cookie = cookie;\r\n      }\r\n      await store.dispatch(getUserInfoAction());\r\n      const searchPosts = await fetcher(`/search/${encodeURIComponent(query?.keyword as string)}`);\r\n      return {\r\n        props: { searchPosts },\r\n      };\r\n    }\r\n);\r\n\r\nexport default index;\r\n","module.exports = require(\"@ant-design/icons\");","module.exports = require(\"@emotion/react\");","module.exports = require(\"@emotion/react/jsx-runtime\");","module.exports = require(\"@emotion/styled/base\");","module.exports = require(\"@reduxjs/toolkit\");","module.exports = require(\"antd\");","module.exports = require(\"axios\");","module.exports = require(\"dayjs\");","module.exports = require(\"dayjs/locale/ko\");","module.exports = require(\"dayjs/plugin/relativeTime\");","module.exports = require(\"next-redux-wrapper\");","module.exports = require(\"next/head\");","module.exports = require(\"next/router\");","module.exports = require(\"react\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-toastify\");","module.exports = require(\"swr\");"],"names":["React","useCallback","useDispatch","mainSlice","FLEX_STYLE","SM_SIZE","XLG_SIZE","SearchPagePosterWrapper","SearchPagePoster","searchWord","dispatch","onClickSearchAnotherBtn","e","stopPropagation","actions","openSearchPopUp","backgroundImage","MinusCircleOutlined","PlusCircleOutlined","ArticleColumnCard","MomentSmallCard","Divider","useState","GRID_STYLE","SearchPostListWrapper","SearchPostList","stories","moments","onMoreStories","setOnMoreStories","onClickMoreStories","prev","length","slice","map","v","i","XLGLayout","getUserInfoAction","axios","wrapper","useRouter","useSWR","fetcher","Head","SearchPageWrapper","index","searchPosts","query","data","searchPostsData","encodeURIComponent","keyword","initialData","revalidateOnFocus","revalidateOnReconnect","getServerSideProps","store","req","res","cookie","headers","defaults","Cookie","props"],"sourceRoot":""}